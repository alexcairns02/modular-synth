var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function s(){return Object.create(null)}function i(t){t.forEach(n)}function l(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function u(t,e,n){t.$$.on_destroy.push(a(e,n))}function d(t,e,n){return t.set(n),e}function c(e){return e&&l(e.destroy)?e.destroy:t}const r="undefined"!=typeof window;let p=r?()=>window.performance.now():()=>Date.now(),f=r?t=>requestAnimationFrame(t):t;const v=new Set;function y(t){v.forEach((e=>{e.c(t)||(v.delete(e),e.f())})),0!==v.size&&f(y)}function m(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode&&t.parentNode.removeChild(t)}function $(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function x(t){return document.createTextNode(t)}function I(){return x(" ")}function E(){return x("")}function k(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function L(t){let e;return{p(...n){e=n,e.forEach((e=>t.push(e)))},r(){e.forEach((e=>t.splice(t.indexOf(e),1)))}}}function _(t){return""===t?null:+t}function T(t,e){e=""+e,t.data!==e&&(t.data=e)}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function q(t,e){t.value=null==e?"":e}function S(t,e,n,s){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function z(t,e,n){t.classList[n?"add":"remove"](e)}function A(t,e){return new t(e)}let H;function O(t){H=t}const B=[],j=[];let F=[];const M=[],P=Promise.resolve();let D=!1;function U(t){F.push(t)}function V(t){M.push(t)}const R=new Set;let G=0;function J(){if(0!==G)return;const t=H;do{try{for(;G<B.length;){const t=B[G];G++,O(t),W(t.$$)}}catch(t){throw B.length=0,G=0,t}for(O(null),B.length=0,G=0;j.length;)j.pop()();for(let t=0;t<F.length;t+=1){const e=F[t];R.has(e)||(R.add(e),e())}F.length=0}while(B.length);for(;M.length;)M.pop()();D=!1,R.clear(),O(t)}function W(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const Y=new Set;let Q;function X(){Q={r:0,c:[],p:Q}}function K(){Q.r||i(Q.c),Q=Q.p}function Z(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function tt(t,e,n,s){if(t&&t.o){if(Y.has(t))return;Y.add(t),Q.c.push((()=>{Y.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function et(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function nt(t){t&&t.c()}function st(t,e,s,o){const{fragment:a,after_update:u}=t.$$;a&&a.m(e,s),o||U((()=>{const e=t.$$.on_mount.map(n).filter(l);t.$$.on_destroy?t.$$.on_destroy.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(U)}function it(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];F.forEach((s=>-1===t.indexOf(s)?e.push(s):n.push(s))),n.forEach((t=>t())),F=e}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){-1===t.$$.dirty[0]&&(B.push(t),D||(D=!0,P.then(J)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(e,n,l,o,a,u,d,c=[-1]){const r=H;O(e);const p=e.$$={fragment:null,ctx:[],props:u,update:t,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(r?r.$$.context:[])),callbacks:s(),dirty:c,skip_bound:!1,root:n.target||r.$$.root};d&&d(p.root);let f=!1;if(p.ctx=l?l(e,n.props||{},((t,n,...s)=>{const i=s.length?s[0]:n;return p.ctx&&a(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),f&&lt(e,t)),n})):[],p.update(),f=!0,i(p.before_update),p.fragment=!!o&&o(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(g)}else p.fragment&&p.fragment.c();n.intro&&Z(e.$$.fragment),st(e,n.target,n.anchor,n.customElement),J()}O(r)}class at{$destroy(){it(this,1),this.$destroy=t}$on(e,n){if(!l(n))return t;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const t=s.indexOf(n);-1!==t&&s.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ut=[];function dt(e,n=t){let s;const i=new Set;function l(t){if(o(e,t)&&(e=t,s)){const t=!ut.length;for(const t of i)t[1](),ut.push(t,e);if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(o,a=t){const u=[o,a];return i.add(u),1===i.size&&(s=n(l)||t),o(e),()=>{i.delete(u),0===i.size&&s&&(s(),s=null)}}}}const ct=dt({}),rt=dt({voct:null,trigger:!1}),pt=dt(null),ft=dt({}),vt={subscribe:dt({vco:"#ff6666",mixer:"#ffff77",vca:"#88ff88",vcf:"#ff9955",lfo:"#dd88ff",adsr:"#7788ff",delay:"#bbbbcc",noise:"#bb7755",input:"#88eeff"},yt).subscribe};var yt;const mt=dt(null),ht=dt(!1);function gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $t,bt,wt,xt,It={exports:{}};$t=It,bt=It.exports,xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=document.createElement("input");return"object"===xt(e[0])&&(!0===e[0].multiple&&s.setAttribute("multiple",""),void 0!==e[0].accept&&s.setAttribute("accept",e[0].accept)),s.setAttribute("type","file"),s.style.display="none",s.setAttribute("id","hidden-file"),document.body.appendChild(s),new Promise((function(t){s.addEventListener("change",(function(){t(s.files);var n=e[e.length-1];"function"==typeof n&&n(s.files),document.body.removeChild(s)}));var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(n)}))},$t.exports&&(bt=$t.exports=wt),bt.fileDialog=wt;var Et=gt(It.exports);function kt(t){let e,n=t[0]+t[3]+"";return{c(){e=x(n)},m(t,n){h(t,e,n)},p(t,s){9&s&&n!==(n=t[0]+t[3]+"")&&T(e,n)},d(t){t&&g(e)}}}function Ct(e){let n,s,l,o,a,u,d,c,r,p,f,v,y,$,w,E,L=e[2]&&kt(e);return{c(){n=b("main"),s=b("div"),l=b("h2"),l.textContent="Note Input",o=I(),a=b("p"),a.innerHTML="Play notes by pressing QWERTY keys on keyboard<br/>\n    (Requires oscillator in patch for output)",u=I(),d=b("p"),d.innerHTML="Change octave: &#39;-&#39; and &#39;=&#39;<br/>",c=I(),r=b("p"),p=x("Note played: "),f=b("b"),v=x(e[2]),L&&L.c(),y=I(),$=b("br"),C(a,"class","svelte-fwrw15"),C(d,"class","svelte-fwrw15"),C(f,"class","svelte-fwrw15"),z(f,"active",e[1]),C(r,"class","svelte-fwrw15"),C(s,"class","svelte-fwrw15")},m(t,i){h(t,n,i),m(n,s),m(s,l),m(s,o),m(s,a),m(s,u),m(s,d),m(s,c),m(s,r),m(r,p),m(r,f),m(f,v),L&&L.m(f,null),m(n,y),m(n,$),w||(E=[k(window,"keydown",e[4]),k(window,"keyup",e[5])],w=!0)},p(t,[e]){4&e&&T(v,t[2]),t[2]?L?L.p(t,e):(L=kt(t),L.c(),L.m(f,null)):L&&(L.d(1),L=null),2&e&&z(f,"active",t[1])},i:t,o:t,d(t){t&&g(n),L&&L.d(),w=!1,i(E)}}}function Lt(t,e,n){let s,i;u(t,rt,(t=>n(11,s=t))),u(t,ht,(t=>n(12,i=t)));const l={90:{code:90,frequency:261.63,note:"C",octUp:0},83:{code:83,frequency:277.18,note:"C#/Db",octUp:0},88:{code:88,frequency:293.66,note:"D",octUp:0},68:{code:68,frequency:311.13,note:"D#/Eb",octUp:0},67:{code:67,frequency:329.63,note:"E",octUp:0},86:{code:86,frequency:349.23,note:"F",octUp:0},71:{code:71,frequency:369.99,note:"F#/Gb",octUp:0},66:{code:66,frequency:392,note:"G",octUp:0},72:{code:72,frequency:415.3,note:"G#/Ab",octUp:0},78:{code:78,frequency:440,note:"A",octUp:0},74:{code:74,frequency:466.16,note:"A#/Bb",octUp:0},77:{code:77,frequency:493.88,note:"B",octUp:0},188:{code:188,frequency:523.25,note:"C",octUp:1},76:{code:76,frequency:554.37,note:"C#/Db",octUp:1},190:{code:190,frequency:587.33,note:"D",octUp:1},59:{code:59,frequency:622.25,note:"D#/Eb",octUp:1},191:{code:191,frequency:659.25,note:"E",octUp:1},81:{code:81,frequency:698.46,note:"F",octUp:1},50:{code:50,frequency:739.99,note:"F#/Gb",octUp:1},87:{code:87,frequency:783.99,note:"G",octUp:1},51:{code:51,frequency:830.61,note:"G#/Ab",octUp:1},69:{code:69,frequency:880,note:"A",octUp:1},52:{code:52,frequency:932.33,note:"A#/Bb",octUp:1},82:{code:82,frequency:987.77,note:"B",octUp:1},84:{code:84,frequency:1046.5,note:"C",octUp:2},54:{code:54,frequency:1108.73,note:"C#/Db",octUp:2},89:{code:89,frequency:1174.66,note:"D",octUp:2},55:{code:55,frequency:1244.51,note:"D#/Eb",octUp:2},85:{code:85,frequency:1318.51,note:"E",octUp:2},73:{code:73,frequency:1396.91,note:"F",octUp:2},57:{code:57,frequency:1479.98,note:"F#/Gb",octUp:2},79:{code:79,frequency:1567.98,note:"G",octUp:2},48:{code:48,frequency:1661.22,note:"G#/Ab",octUp:2},80:{code:80,frequency:1760,note:"A",octUp:2}};let o=[],a=4,c=4,r=!1,p="",f=0;function v(){if(d(rt,s.trigger=o.length>0,s),s.trigger){let t=o[o.length-1];n(0,c=a),n(3,f=t.octUp),n(2,p=t.note),n(1,r=!0);let e=t.frequency;if(a>4)for(let t=4;t<a;t++)e*=2;else for(let t=4;t>a;t--)e/=2;d(rt,s.voct=Math.log2(e),s)}else d(rt,s.voct=null,s),n(1,r=!1)}return[c,r,p,f,function(t){if(i)return;if(t.preventDefault(),t.repeat)return;let e;switch(Object.keys(l).includes(String(t.keyCode))&&(e=l[t.keyCode],function(t){let e=!1;return o.forEach((n=>{n.code==t.code&&(e=!0)})),e}(e)||o.push(e)),t.keyCode){case 61:a<10&&(a+=1);break;case 173:a>-2&&(a-=1)}v()},function(t){let e=null;o.forEach(((n,s)=>{n.code==t.keyCode&&(e=s)})),null!=e&&o.splice(e,1),v()}]}class _t extends at{constructor(t){super(),ot(this,t,Lt,Ct,o,{})}}let Tt,Nt;function qt(){for(let t=0;t<Object.keys(Tt).length+1;t++)if(!Tt[t])return t}function St(t){t.isAudio&&t.clearCurrents(),t.destroyed=!0,t.component.parentNode.removeChild(t.component),(t.state.cvId||0==t.state.cvId)&&ct.update((e=>(e[t.state.cvId].removeOutput(t.state.id+".1",t.cv),e))),(t.state.cvId2||0==t.state.cvId2)&&ct.update((e=>(e[t.state.cvId2].removeOutput(t.state.id+".2",t.cv2),e))),Nt.state.inputId==t.state.id&&ft.update((t=>(t.state.inputId=null,t))),Object.values(Tt).forEach((e=>{null!=e.state.inputId&&e.state.inputId==t.state.id&&ct.update((t=>(t[e.state.id].state.inputId=null,t))),null!=e.state.cvId&&e.state.cvId==t.state.id&&ct.update((t=>(t[e.state.id].state.cvId=null,t))),null!=e.state.cvId2&&e.state.cvId2==t.state.id&&ct.update((t=>(t[e.state.id].state.cvId2=null,t))),"mixer"==e.state.type&&ct.update((n=>(n[e.state.id].state.inputIds.forEach(((s,i)=>{s==t.state.id&&(n[e.state.id].state.inputIds[i]=null)})),n)))})),ct.update((e=>(delete e[t.state.id],e)))}function zt(t){Object.values(Tt).forEach((e=>{e.isAudio||null!=t&&e.state.id==t.state.id?(null!=t&&e.state.id==t.state.inputId||null==t&&e.state.id==Nt.state.inputId)&&e.bob():e.fade()}))}function At(t,e){Object.values(Tt).forEach((n=>{n.state.id!=t.state.id&&(!n.isAudio||t.state.inputIds.includes(n.state.id)&&n.state.id!=e)?n.fade():null!=e&&n.state.id==e&&n.bob()}))}function Ht(t,e=0){Object.values(Tt).forEach((n=>{n.isControl||n.state.id==t.state.id?null!=t&&(n.state.id==t.state.cvId&&0==e||n.state.id==t.state.cvId2&&1==e)&&n.bob():n.fade()}))}function Ot(){Object.values(Tt).forEach((t=>{t.unfade()}))}function Bt(){let t={x:350,y:100},e=!0;for(;e;){let n=!1;Object.values(Tt).forEach((e=>{e.state.position&&e.state.position.x==t.x&&e.state.position.y==t.y&&(n=!0)})),n?(t.x+=20,t.y+=20):e=!1}return t}function jt(t){return"[object Date]"===Object.prototype.toString.call(t)}function Ft(t,e,n,s){if("number"==typeof n||jt(n)){const i=s-n,l=(n-e)/(t.dt||1/60),o=(l+(t.opts.stiffness*i-t.opts.damping*l)*t.inv_mass)*t.dt;return Math.abs(o)<t.opts.precision&&Math.abs(i)<t.opts.precision?s:(t.settled=!1,jt(n)?new Date(n.getTime()+o):n+o)}if(Array.isArray(n))return n.map(((i,l)=>Ft(t,e[l],n[l],s[l])));if("object"==typeof n){const i={};for(const l in n)i[l]=Ft(t,e[l],n[l],s[l]);return i}throw new Error(`Cannot spring ${typeof n} values`)}function Mt(t,e={}){const n=dt(t),{stiffness:s=.15,damping:i=.8,precision:l=.01}=e;let o,a,u,d=t,c=t,r=1,m=0,h=!1;function g(e,s={}){c=e;const i=u={};if(null==t||s.hard||$.stiffness>=1&&$.damping>=1)return h=!0,o=p(),d=e,n.set(t=c),Promise.resolve();if(s.soft){const t=!0===s.soft?.5:+s.soft;m=1/(60*t),r=0}return a||(o=p(),h=!1,a=function(t){let e;return 0===v.size&&f(y),{promise:new Promise((n=>{v.add(e={c:t,f:n})})),abort(){v.delete(e)}}}((e=>{if(h)return h=!1,a=null,!1;r=Math.min(r+m,1);const s={inv_mass:r,opts:$,settled:!0,dt:60*(e-o)/1e3},i=Ft(s,d,t,c);return o=e,d=t,n.set(t=i),s.settled&&(a=null),!s.settled}))),new Promise((t=>{a.promise.then((()=>{i===u&&t()}))}))}const $={set:g,update:(e,n)=>g(e(c,t),n),subscribe:n.subscribe,stiffness:s,damping:i,precision:l};return $}function Pt(t){let e;return{c(){e=b("p"),e.textContent="Select input below"},m(t,n){h(t,e,n)},d(t){t&&g(e)}}}function Dt(t){let e;return{c(){e=b("p"),e.textContent="Add modules using buttons above"},m(t,n){h(t,e,n)},d(t){t&&g(e)}}}function Ut(e){let n;return{c(){n=x("None")},m(t,e){h(t,n,e)},p:t,d(t){t&&g(n)}}}function Vt(t){let e,n,s,i=t[1].state.inputId+"",l=t[2][t[1].state.inputId].state.title+"";return{c(){e=x(i),n=I(),s=x(l)},m(t,i){h(t,e,i),h(t,n,i),h(t,s,i)},p(t,n){2&n[0]&&i!==(i=t[1].state.inputId+"")&&T(e,i),6&n[0]&&l!==(l=t[2][t[1].state.inputId].state.title+"")&&T(s,l)},d(t){t&&g(e),t&&g(n),t&&g(s)}}}function Rt(t){let e,n,s,l;return{c(){e=b("button"),n=x(t[5]),C(e,"id","recordBtn"),C(e,"class","svelte-lz5h6v")},m(i,o){h(i,e,o),m(e,n),s||(l=[c(t[10].call(null,e)),k(e,"click",t[15])],s=!0)},p(t,e){32&e[0]&&T(n,t[5])},d(t){t&&g(e),s=!1,i(l)}}}function Gt(e){let n,s,l;return{c(){n=b("button"),n.textContent="Save",C(n,"id","saveBtn"),C(n,"class","svelte-lz5h6v")},m(t,i){h(t,n,i),s||(l=[c(e[12].call(null,n)),k(n,"click",e[28])],s=!0)},p:t,d(t){t&&g(n),s=!1,i(l)}}}function Jt(e){let n,s,l,o,a,u,d,r,p,f,v,y,$,w,E,L,_,N,S,z,A,H,O,B,j,F,M,P,D;function U(t,e){return 4&e[0]&&(r=null),null==r&&(r=!(0!=Object.values(t[2]).length)),r?Dt:null==t[1].state.inputId?Pt:void 0}let V=U(e,[-1,-1]),R=V&&V(e);function G(t,e){return null!=t[1].state.inputId&&t[2][t[1].state.inputId]?Vt:Ut}let J=G(e),W=J(e),Y=null!=e[1].state.inputId&&Rt(e),Q=e[4]&&Gt(e);return{c(){n=b("main"),s=b("div"),l=b("h2"),o=x("Audio Output ("),a=x(e[3]),u=x(")"),d=I(),R&&R.c(),p=I(),f=b("div"),v=b("div"),y=b("label"),$=b("button"),W.c(),w=x(" Input"),E=I(),L=b("br"),_=I(),N=b("label"),N.textContent="Volume",S=b("input"),z=I(),A=b("br"),H=I(),O=b("div"),Y&&Y.c(),B=I(),j=b("div"),F=b("div"),M=I(),Q&&Q.c(),C($,"id","inputBtn"),C($,"class","svelte-lz5h6v"),C(v,"id","inputDiv"),C(v,"class","svelte-lz5h6v"),C(N,"for","gain"),C(S,"id","gain"),C(S,"type","range"),C(S,"min","0"),C(S,"max","1"),C(S,"step","0.001"),C(F,"id","audioClip"),C(F,"class","svelte-lz5h6v"),C(j,"id","recorded"),C(j,"class","svelte-lz5h6v"),C(O,"id","recording"),C(O,"class","svelte-lz5h6v"),C(s,"id","mainDiv"),C(s,"class","svelte-lz5h6v")},m(t,i){h(t,n,i),m(n,s),m(s,l),m(l,o),m(l,a),m(l,u),m(s,d),R&&R.m(s,null),m(s,p),m(s,f),m(f,v),m(v,y),m(y,$),W.m($,null),m(y,w),m(v,E),m(f,L),m(f,_),m(f,N),m(f,S),q(S,e[1].state.volume),m(s,z),m(s,A),m(s,H),m(s,O),Y&&Y.m(O,null),m(O,B),m(O,j),m(j,F),m(j,M),Q&&Q.m(j,null),P||(D=[c(e[9].call(null,$)),k($,"click",e[14]),k(v,"mouseenter",e[25]),k(v,"mouseleave",e[26]),k(S,"change",e[27]),k(S,"input",e[27]),c(e[8].call(null,f)),c(e[11].call(null,F)),c(e[7].call(null,s))],P=!0)},p(t,e){8&e[0]&&T(a,t[3]),V!==(V=U(t,e))&&(R&&R.d(1),R=V&&V(t),R&&(R.c(),R.m(s,p))),J===(J=G(t))&&W?W.p(t,e):(W.d(1),W=J(t),W&&(W.c(),W.m($,null))),2&e[0]&&q(S,t[1].state.volume),null!=t[1].state.inputId?Y?Y.p(t,e):(Y=Rt(t),Y.c(),Y.m(O,B)):Y&&(Y.d(1),Y=null),t[4]?Q?Q.p(t,e):(Q=Gt(t),Q.c(),Q.m(j,null)):Q&&(Q.d(1),Q=null)},i:t,o:t,d(t){t&&g(n),R&&R.d(),W.d(),Y&&Y.d(),Q&&Q.d(),P=!1,i(D)}}}function Wt(t,e,n){let s,i,l,o,a,c;u(t,pt,(t=>n(36,s=t))),u(t,mt,(t=>n(0,i=t))),u(t,ft,(t=>n(1,l=t))),u(t,ct,(t=>n(2,o=t))),u(t,vt,(t=>n(23,a=t)));let r,p,f,v,y,m,{state:h={volume:.5,inputId:null}}=e;d(ft,l.selectingInput=!1,l),d(ft,l.state=h,l);var g,$=s.createGain();$.connect(s.destination);let b=Mt(0,{stiffness:.05,damping:.3});u(t,b,(t=>n(24,c=t)));let w=!1,x="disconnected";setTimeout((()=>{n(22,w=!0)}),500),d(ft,l.select=t=>{l.selectingInput&&(d(ft,l.state.inputId=t,l),n(19,f.style.opacity=1,f),d(ft,l.selectingInput=!1,l)),d(mt,i=null,i),Ot()},l);let I,E,k,C=!1,L=!1,T=[],N="Record";return t.$$set=t=>{"state"in t&&n(16,h=t.state)},t.$$.update=()=>{6&t.$$.dirty[0]&&(null!=l.state.inputId?d(ft,l.input=o[l.state.inputId],l):d(ft,l.input=null,l)),2&t.$$.dirty[0]&&n(20,$.gain.value=l.state.volume,$),3145730&t.$$.dirty[0]&&(l.input?(g&&g.disconnect($),n(21,g=l.input.output),g.connect($),(l.input.input||l.input.inputs)&&l.input.update()):(g&&g.disconnect($),n(21,g=null))),16908288&t.$$.dirty[0]&&r&&n(17,r.style.backgroundColor=`rgba(255, ${255-c}, ${255-c}, 0.7)`,r),4194306&t.$$.dirty[0]&&(w&&null==l.state.inputId?(b.set(255),n(3,x="disconnected")):(b.set(0),n(3,x="connected"))),8912902&t.$$.dirty[0]&&f&&(null!=l.state.inputId?n(19,f.style.backgroundColor=a[o[l.state.inputId].state.type],f):n(19,f.style.backgroundColor="#f0f0f0",f)),262145&t.$$.dirty[0]&&p&&n(18,p.style.pointerEvents=null!=i?"none":"all",p),131073&t.$$.dirty[0]&&r&&n(17,r.style.pointerEvents=null!=i?"all":"none",r)},[i,l,o,x,L,N,k,t=>{n(17,r=t),r.addEventListener("mousedown",(()=>{"output"==i&&l.select(null)}))},t=>{n(18,p=t)},t=>{n(19,f=t),f.addEventListener("mouseenter",(()=>{null==i&&n(19,f.style.opacity=.8,f)})),f.addEventListener("mouseleave",(()=>{null==i&&n(19,f.style.opacity=1,f)}))},t=>{v=t,v.addEventListener("mouseenter",(()=>{v.style.opacity=.8})),v.addEventListener("mouseleave",(()=>{v.style.opacity=1}))},t=>{y=t},t=>{m=t,m.addEventListener("mouseenter",(()=>{m.style.opacity=.8})),m.addEventListener("mouseleave",(()=>{m.style.opacity=1}))},b,function(){zt(null),f&&(l.selectingInput?d(ft,l.selectingInput=!1,l):(d(ft,l.selectingInput=!0,l),n(19,f.style.opacity=.5,f),d(mt,i="output",i)))},function(){C=!C,C?function(){v&&(v.style.backgroundColor="#ff6666");n(5,N="Recording"),I=s.createMediaStreamDestination(),$.connect(I),E=new MediaRecorder(I.stream),E.ondataavailable=t=>{T.push(t.data)},E.onstop=t=>{n(6,k=document.createElement("a"));const e=new Blob(T,{type:"audio/ogg; codec=opus"}),s=URL.createObjectURL(e);n(6,k.href=s,k),n(6,k.download="recording.ogg",k);const i=new Audio;i.setAttribute("controls",""),i.src=s,y.replaceChildren(i),T=[],n(4,L=!0),v&&(v.style.backgroundColor="#f0f0f0"),n(5,N="Record")},E.start()}():E.stop()},h,r,p,f,$,g,w,a,c,()=>{zt(null)},()=>{null==i&&Ot()},function(){l.state.volume=_(this.value),ft.set(l)},()=>k.click()]}ct.subscribe((t=>{Tt=t})),ft.subscribe((t=>{Nt=t}));class Yt extends at{constructor(t){super(),ot(this,t,Wt,Jt,o,{state:16},null,[-1,-1])}}function Qt(e,n,s){let i,l,o,d,c,r,p=t,f=()=>(p(),p=a(w,(t=>s(11,i=t))),w);u(e,rt,(t=>s(15,c=t))),u(e,mt,(t=>s(18,r=t))),e.$$.on_destroy.push((()=>p()));let{hasTrigger:v=!1}=n,{moduleNode:y}=n,{controlsNode:m}=n,{deleteNode:h}=n,{helpBtn:g}=n,{nodeSize:$={x:300,y:300}}=n,{nodePos:b={x:300,y:100}}=n,{bobSize:w}=n;f();let x=Mt({x:b.x,y:b.y},{stiffness:.3,damping:.5});u(e,x,(t=>s(14,d=t)));let I=Mt(0,{stiffness:.3,damping:.5});u(e,I,(t=>s(13,o=t)));let E=Mt(0,{stiffness:1,damping:.5});u(e,E,(t=>s(12,l=t)));let k=!1,C=!1;const L=()=>{k=!0,C||null!=r?C||I.set(5):I.set(20)},_=()=>{C=!0},T=()=>{k=!1,C=!1,I.set(0)},N=t=>{k&&!C&&null==r&&(s(5,b.x+=t.movementX,b),s(5,b.y+=t.movementY,b),x.set({x:b.x,y:b.y}))};return window.addEventListener("mouseup",T),window.addEventListener("touchend",T),window.addEventListener("mousemove",N),window.addEventListener("touchmove",N),e.$$set=t=>{"hasTrigger"in t&&s(6,v=t.hasTrigger),"moduleNode"in t&&s(4,y=t.moduleNode),"controlsNode"in t&&s(7,m=t.controlsNode),"deleteNode"in t&&s(8,h=t.deleteNode),"helpBtn"in t&&s(9,g=t.helpBtn),"nodeSize"in t&&s(10,$=t.nodeSize),"nodePos"in t&&s(5,b=t.nodePos),"bobSize"in t&&f(s(0,w=t.bobSize))},e.$$.update=()=>{31760&e.$$.dirty&&y&&(s(4,y.style.left=d.x-o/2-l/2-i/2+"px",y),s(4,y.style.top=d.y-o/2-l/2-i/2+"px",y),s(4,y.style.width=`${$.x+o+l+i}px`,y),s(4,y.style.height=`${$.y+o+l+i}px`,y)),16&e.$$.dirty&&y&&(y.addEventListener("mousedown",L),y.addEventListener("touchstart",L)),128&e.$$.dirty&&m&&m.childNodes.forEach((t=>{t.addEventListener("mousedown",_),t.addEventListener("touchstart",_)})),256&e.$$.dirty&&h&&(h.addEventListener("mousedown",_),h.addEventListener("touchstart",_)),512&e.$$.dirty&&g&&(g.addEventListener("mousedown",_),g.addEventListener("touchstart",_)),32832&e.$$.dirty&&(c.trigger&&v?E.set(2):E.set(0))},[w,x,I,E,y,b,v,m,h,g,$,i,l,o,d,c]}class Xt extends at{constructor(t){super(),ot(this,t,Qt,null,o,{hasTrigger:6,moduleNode:4,controlsNode:7,deleteNode:8,helpBtn:9,nodeSize:10,nodePos:5,bobSize:0})}}function Kt(e){let n,s,i,l,o,a,u;return{c(){n=b("main"),s=w("svg"),i=w("defs"),l=w("g"),o=w("path"),C(o,"d","M 45 0 C 20.147 0 0 20.147 0 45 c 0 24.853 20.147 45 45 45 s 45 -20.147 45 -45 C 90 20.147 69.853 0 45 0 z M 64.244 61.416 c 0.781 0.781 0.781 2.047 0 2.828 c -0.391 0.391 -0.902 0.586 -1.414 0.586 s -1.023 -0.195 -1.414 -0.586 L 45 47.828 L 28.583 64.244 c -0.39 0.391 -0.902 0.586 -1.414 0.586 s -1.024 -0.195 -1.414 -0.586 c -0.781 -0.781 -0.781 -2.047 0 -2.828 L 42.172 45 L 25.755 28.583 c -0.781 -0.781 -0.781 -2.047 0 -2.828 c 0.78 -0.781 2.048 -0.781 2.828 0 L 45 42.172 l 16.416 -16.416 c 0.781 -0.781 2.047 -0.781 2.828 0 c 0.781 0.781 0.781 2.047 0 2.828 L 47.828 45 L 64.244 61.416 z"),S(o,"stroke","none"),S(o,"stroke-width","1"),S(o,"stroke-dasharray","none"),S(o,"stroke-linecap","butt"),S(o,"stroke-linejoin","miter"),S(o,"stroke-miterlimit","10"),S(o,"fill","#222222"),S(o,"fill-rule","nonzero"),S(o,"opacity","1"),C(o,"transform"," matrix(1 0 0 1 0 0) "),C(o,"stroke-linecap","round"),S(l,"stroke","none"),S(l,"stroke-width","0"),S(l,"stroke-dasharray","none"),S(l,"stroke-linecap","butt"),S(l,"stroke-linejoin","miter"),S(l,"stroke-miterlimit","10"),S(l,"fill","none"),S(l,"fill-rule","nonzero"),S(l,"opacity","1"),C(l,"transform","translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)"),C(s,"xmlns","http://www.w3.org/2000/svg"),C(s,"xmlns:xlink","http://www.w3.org/1999/xlink"),C(s,"version","1.1"),C(s,"viewBox","0 0 256 256"),C(s,"xml:space","preserve")},m(t,d){h(t,n,d),m(n,s),m(s,i),m(s,l),m(l,o),a||(u=c(e[1].call(null,s)),a=!0)},p:t,i:t,o:t,d(t){t&&g(n),a=!1,u()}}}function Zt(t,e,n){let s,i,{module:l}=e,o=Mt(25,{stiffness:.3,damping:.5});u(t,o,(t=>n(4,s=t)));let a=!1;const d=()=>{o.set(35),a=!0},c=()=>{a&&St(l)},r=()=>{o.set(25),a=!1},p=()=>{a||o.set(30)},f=()=>{a||o.set(25)};return t.$$set=t=>{"module"in t&&n(2,l=t.module)},t.$$.update=()=>{24&t.$$.dirty&&i&&n(3,i.style.width=`${s}px`,i)},[o,function(t){n(3,i=t),i.addEventListener("mousedown",d),i.addEventListener("touchstart",d),i.addEventListener("mouseup",c),i.addEventListener("touchend",c),window.addEventListener("mouseup",r),window.addEventListener("touchend",c),i.addEventListener("mouseover",p),i.addEventListener("mouseout",f)},l,i,s]}class te extends at{constructor(t){super(),ot(this,t,Zt,Kt,o,{module:2})}}function ee(e){let n,s,i,l,o,a,u;return{c(){n=b("main"),s=w("svg"),i=w("defs"),l=w("g"),o=w("path"),C(o,"d","M 45 0 C 20.147 0 0 20.147 0 45 c 0 24.853 20.147 45 45 45 s 45 -20.147 45 -45 C 90 20.147 69.853 0 45 0 z M 43.17 21 c 0 -1.104 0.896 -2 2 -2 c 1.105 0 2 0.896 2 2 v 5.787 c 0 1.104 -0.895 2 -2 2 c -1.104 0 -2 -0.896 -2 -2 V 21 z M 51.639 71 H 45.17 c -1.104 0 -2 -0.896 -2 -2 V 42.064 h -4.809 c -1.104 0 -2 -0.896 -2 -2 s 0.896 -2 2 -2 h 6.809 c 1.105 0 2 0.896 2 2 V 67 h 4.469 c 1.104 0 2 0.896 2 2 S 52.743 71 51.639 71 z"),S(o,"stroke","none"),S(o,"stroke-width","1"),S(o,"stroke-dasharray","none"),S(o,"stroke-linecap","butt"),S(o,"stroke-linejoin","miter"),S(o,"stroke-miterlimit","10"),S(o,"fill","#222222"),S(o,"fill-rule","nonzero"),S(o,"opacity","1"),C(o,"transform"," matrix(1 0 0 1 0 0) "),C(o,"stroke-linecap","round"),S(l,"stroke","none"),S(l,"stroke-width","0"),S(l,"stroke-dasharray","none"),S(l,"stroke-linecap","butt"),S(l,"stroke-linejoin","miter"),S(l,"stroke-miterlimit","10"),S(l,"fill","none"),S(l,"fill-rule","nonzero"),S(l,"opacity","1"),C(l,"transform","translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)"),C(s,"xmlns","http://www.w3.org/2000/svg"),C(s,"xmlns:xlink","http://www.w3.org/1999/xlink"),C(s,"version","1.1"),C(s,"viewBox","0 0 256 256"),C(s,"xml:space","preserve")},m(t,d){h(t,n,d),m(n,s),m(s,i),m(s,l),m(l,o),a||(u=c(e[1].call(null,s)),a=!0)},p:t,i:t,o:t,d(t){t&&g(n),a=!1,u()}}}function ne(t,e,n){let s,i,{module:l}=e,o=Mt(25,{stiffness:.3,damping:.5});u(t,o,(t=>n(4,s=t)));let a=!1;const d=()=>{o.set(35),a=!0},c=()=>{a&&(o.set(30),l.toggleHelp())},r=()=>{o.set(25),a=!1},p=()=>{a||o.set(30)},f=()=>{a||o.set(25)};return t.$$set=t=>{"module"in t&&n(2,l=t.module)},t.$$.update=()=>{24&t.$$.dirty&&i&&n(3,i.style.width=`${s}px`,i)},[o,function(t){n(3,i=t),i.addEventListener("mousedown",d),i.addEventListener("touchstart",d),i.addEventListener("mouseup",c),i.addEventListener("touchend",c),window.addEventListener("mouseup",r),window.addEventListener("touchend",c),i.addEventListener("mouseover",p),i.addEventListener("mouseout",f)},l,i,s]}class se extends at{constructor(t){super(),ot(this,t,ne,ee,o,{module:2})}}function ie(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,$,w,E,_,S,z,A,H,O,B,F,M,P,D,R,G,J,W,Y,Q,X,K,lt,ot,at,ut,dt,ct,rt,pt,ft,vt,yt,mt,ht,gt,$t,bt,wt,xt,It,Et,kt,Ct,Lt,_t,Tt,Nt,qt,St,zt,At,Ht,Ot,Bt,jt,Ft,Mt,Pt,Dt,Ut,Vt,Rt,Gt,Jt,Wt,Yt,Qt,Kt,Zt=t[4].state.id+"",ee=t[4].state.title+"",ne=t[5].toFixed(1)+"",ie=t[4].state.detune+"";function de(e){t[34](e)}function ce(e){t[35](e)}function re(e){t[36](e)}function pe(e){t[37](e)}function fe(e){t[38](e)}function ve(e){t[39](e)}function ye(e){t[40](e)}let me={};function he(t,e){return null!=t[4].state.cvId&&t[7][t[4].state.cvId]?oe:le}void 0!==t[1]&&(me.moduleNode=t[1]),void 0!==t[2]&&(me.controlsNode=t[2]),void 0!==t[3]&&(me.deleteNode=t[3]),void 0!==t[9]&&(me.helpBtn=t[9]),void 0!==t[0].position&&(me.nodePos=t[0].position),void 0!==t[10]&&(me.nodeSize=t[10]),void 0!==t[11]&&(me.bobSize=t[11]),n=new Xt({props:me}),j.push((()=>et(n,"moduleNode",de))),j.push((()=>et(n,"controlsNode",ce))),j.push((()=>et(n,"deleteNode",re))),j.push((()=>et(n,"helpBtn",pe))),j.push((()=>et(n,"nodePos",fe))),j.push((()=>et(n,"nodeSize",ve))),j.push((()=>et(n,"bobSize",ye))),y=new te({props:{module:t[4]}}),E=new se({props:{module:t[4]}});let ge=he(t),$e=ge(t);function be(t,e){return null!=t[4].state.cvId2&&t[7][t[4].state.cvId2]?ue:ae}let we=be(t),xe=we(t);return Yt=L(t[51][0]),{c(){e=b("main"),nt(n.$$.fragment),p=I(),f=b("div"),v=b("div"),nt(y.$$.fragment),$=I(),w=b("div"),nt(E.$$.fragment),_=I(),S=b("h1"),z=x(Zt),A=I(),H=b("div"),O=b("h2"),B=x(ee),F=I(),M=b("div"),P=b("div"),D=b("label"),R=b("button"),$e.c(),G=x(" Control"),J=I(),W=b("label"),Y=x("Frequency ("),Q=x(ne),X=x("Hz)"),K=b("input"),lt=I(),ot=b("br"),at=b("br"),ut=I(),dt=b("div"),ct=b("label"),rt=b("button"),xe.c(),pt=x(" Control"),ft=I(),vt=b("label"),yt=x("Detune ("),mt=x(ie),ht=x(" cents)"),gt=b("input"),$t=I(),bt=b("br"),wt=b("section"),xt=b("input"),Et=b("label"),kt=x("Sine"),Lt=I(),_t=b("input"),Nt=b("label"),qt=x("Triangle"),zt=I(),At=b("input"),Ot=b("label"),Bt=x("Sawtooth"),Ft=I(),Mt=b("input"),Dt=b("label"),Ut=x("Square"),Rt=I(),Gt=b("div"),Gt.innerHTML='<p class="svelte-1xva0sb">Produces a basic sound wave - the primary starting module of most synth patches.<br/><br/>\n            Pressing keyboard keys changes the pitch of the sound wave, following a piano-like arrangement.<br/><br/>\n            Frequency parameter also changes the pitch, and can be automated with its Control selector.<br/><br/>\n            Detune parameter causes subtle pitch adjustment, and can also be automated.<br/><br/>\n            Selecting an LFO for Detune Control causes vibrato effect.<br/><br/></p>',C(v,"class","delete svelte-1xva0sb"),C(w,"class","help svelte-1xva0sb"),C(O,"class","editableTitle svelte-1xva0sb"),C(O,"contenteditable","true"),void 0===t[7][t[4].state.id].state.title&&U((()=>t[41].call(O))),C(R,"class","svelte-1xva0sb"),C(P,"class","inputDiv"),C(W,"for","freq"),C(K,"id","freq"),C(K,"type","range"),C(K,"min","-2"),C(K,"max","2"),C(K,"step","0.083333333333333"),C(rt,"class","svelte-1xva0sb"),C(dt,"class","inputDiv"),C(vt,"for","detune"),C(gt,"id","detune"),C(gt,"type","range"),C(gt,"min","-100"),C(gt,"max","100"),C(gt,"step","1"),C(xt,"id",It="sine"+t[4].state.id),C(xt,"type","radio"),xt.__value="sine",xt.value=xt.__value,C(xt,"class","svelte-1xva0sb"),C(Et,"for",Ct="sine"+t[4].state.id),C(Et,"class","svelte-1xva0sb"),C(_t,"id",Tt="triangle"+t[4].state.id),C(_t,"type","radio"),_t.__value="triangle",_t.value=_t.__value,C(_t,"class","svelte-1xva0sb"),C(Nt,"for",St="triangle"+t[4].state.id),C(Nt,"class","svelte-1xva0sb"),C(At,"id",Ht="sawtooth"+t[4].state.id),C(At,"type","radio"),At.__value="sawtooth",At.value=At.__value,C(At,"class","svelte-1xva0sb"),C(Ot,"for",jt="sawtooth"+t[4].state.id),C(Ot,"class","svelte-1xva0sb"),C(Mt,"id",Pt="square"+t[4].state.id),C(Mt,"type","radio"),Mt.__value="square",Mt.value=Mt.__value,C(Mt,"class","svelte-1xva0sb"),C(Dt,"for",Vt="square"+t[4].state.id),C(Dt,"class","svelte-1xva0sb"),C(wt,"class","shape svelte-1xva0sb"),C(H,"class","controls"),C(f,"id","module"),C(f,"style",Jt="background-color: "+t[8][t[4].state.type]),C(f,"class","svelte-1xva0sb"),Yt.p(xt,_t,At,Mt)},m(s,i){h(s,e,i),st(n,e,null),m(e,p),m(e,f),m(f,v),st(y,v,null),m(f,$),m(f,w),st(E,w,null),m(f,_),m(f,S),m(S,z),m(f,A),m(f,H),m(H,O),m(O,B),void 0!==t[7][t[4].state.id].state.title&&(O.textContent=t[7][t[4].state.id].state.title),m(H,F),m(H,M),m(M,P),m(P,D),m(D,R),$e.m(R,null),m(D,G),m(M,J),m(M,W),m(W,Y),m(W,Q),m(W,X),m(M,K),q(K,t[4].state.frequency),m(M,lt),m(M,ot),m(M,at),m(M,ut),m(M,dt),m(dt,ct),m(ct,rt),xe.m(rt,null),m(ct,pt),m(M,ft),m(M,vt),m(vt,yt),m(vt,mt),m(vt,ht),m(M,gt),q(gt,t[4].state.detune),m(M,$t),m(M,bt),m(M,wt),m(wt,xt),xt.checked=xt.__value===t[4].state.shape,m(wt,Et),m(Et,kt),m(wt,Lt),m(wt,_t),_t.checked=_t.__value===t[4].state.shape,m(wt,Nt),m(Nt,qt),m(wt,zt),m(wt,At),At.checked=At.__value===t[4].state.shape,m(wt,Ot),m(Ot,Bt),m(wt,Ft),m(wt,Mt),Mt.checked=Mt.__value===t[4].state.shape,m(wt,Dt),m(Dt,Ut),m(f,Rt),m(f,Gt),t[55](e),Wt=!0,Qt||(Kt=[c(t[14].call(null,v)),c(t[15].call(null,w)),c(t[16].call(null,O)),k(O,"input",t[41]),c(t[17].call(null,R)),k(R,"click",t[42]),k(P,"mouseenter",t[43]),k(P,"mouseleave",t[44]),k(K,"change",t[45]),k(K,"input",t[45]),c(t[18].call(null,rt)),k(rt,"click",t[46]),k(dt,"mouseenter",t[47]),k(dt,"mouseleave",t[48]),k(gt,"change",t[49]),k(gt,"input",t[49]),k(xt,"change",t[50]),k(_t,"change",t[52]),k(At,"change",t[53]),k(Mt,"change",t[54]),c(t[20].call(null,M)),c(t[13].call(null,H)),c(t[19].call(null,Gt)),c(t[12].call(null,f))],Qt=!0)},p(t,e){const i={};!s&&2&e[0]&&(s=!0,i.moduleNode=t[1],V((()=>s=!1))),!l&&4&e[0]&&(l=!0,i.controlsNode=t[2],V((()=>l=!1))),!o&&8&e[0]&&(o=!0,i.deleteNode=t[3],V((()=>o=!1))),!a&&512&e[0]&&(a=!0,i.helpBtn=t[9],V((()=>a=!1))),!u&&1&e[0]&&(u=!0,i.nodePos=t[0].position,V((()=>u=!1))),!d&&1024&e[0]&&(d=!0,i.nodeSize=t[10],V((()=>d=!1))),!r&&2048&e[0]&&(r=!0,i.bobSize=t[11],V((()=>r=!1))),n.$set(i);const c={};16&e[0]&&(c.module=t[4]),y.$set(c);const p={};16&e[0]&&(p.module=t[4]),E.$set(p),(!Wt||16&e[0])&&Zt!==(Zt=t[4].state.id+"")&&T(z,Zt),(!Wt||16&e[0])&&ee!==(ee=t[4].state.title+"")&&N(B,ee),144&e[0]&&t[7][t[4].state.id].state.title!==O.textContent&&(O.textContent=t[7][t[4].state.id].state.title),ge===(ge=he(t))&&$e?$e.p(t,e):($e.d(1),$e=ge(t),$e&&($e.c(),$e.m(R,null))),(!Wt||32&e[0])&&ne!==(ne=t[5].toFixed(1)+"")&&T(Q,ne),16&e[0]&&q(K,t[4].state.frequency),we===(we=be(t))&&xe?xe.p(t,e):(xe.d(1),xe=we(t),xe&&(xe.c(),xe.m(rt,null))),(!Wt||16&e[0])&&ie!==(ie=t[4].state.detune+"")&&T(mt,ie),16&e[0]&&q(gt,t[4].state.detune),(!Wt||16&e[0]&&It!==(It="sine"+t[4].state.id))&&C(xt,"id",It),16&e[0]&&(xt.checked=xt.__value===t[4].state.shape),(!Wt||16&e[0]&&Ct!==(Ct="sine"+t[4].state.id))&&C(Et,"for",Ct),(!Wt||16&e[0]&&Tt!==(Tt="triangle"+t[4].state.id))&&C(_t,"id",Tt),16&e[0]&&(_t.checked=_t.__value===t[4].state.shape),(!Wt||16&e[0]&&St!==(St="triangle"+t[4].state.id))&&C(Nt,"for",St),(!Wt||16&e[0]&&Ht!==(Ht="sawtooth"+t[4].state.id))&&C(At,"id",Ht),16&e[0]&&(At.checked=At.__value===t[4].state.shape),(!Wt||16&e[0]&&jt!==(jt="sawtooth"+t[4].state.id))&&C(Ot,"for",jt),(!Wt||16&e[0]&&Pt!==(Pt="square"+t[4].state.id))&&C(Mt,"id",Pt),16&e[0]&&(Mt.checked=Mt.__value===t[4].state.shape),(!Wt||16&e[0]&&Vt!==(Vt="square"+t[4].state.id))&&C(Dt,"for",Vt),(!Wt||272&e[0]&&Jt!==(Jt="background-color: "+t[8][t[4].state.type]))&&C(f,"style",Jt)},i(t){Wt||(Z(n.$$.fragment,t),Z(y.$$.fragment,t),Z(E.$$.fragment,t),Wt=!0)},o(t){tt(n.$$.fragment,t),tt(y.$$.fragment,t),tt(E.$$.fragment,t),Wt=!1},d(s){s&&g(e),it(n),it(y),it(E),$e.d(),xe.d(),t[55](null),Yt.r(),Qt=!1,i(Kt)}}}function le(e){let n;return{c(){n=x("None")},m(t,e){h(t,n,e)},p:t,d(t){t&&g(n)}}}function oe(t){let e,n,s,i=t[4].state.cvId+"",l=t[7][t[4].state.cvId].state.title+"";return{c(){e=x(i),n=I(),s=x(l)},m(t,i){h(t,e,i),h(t,n,i),h(t,s,i)},p(t,n){16&n[0]&&i!==(i=t[4].state.cvId+"")&&T(e,i),144&n[0]&&l!==(l=t[7][t[4].state.cvId].state.title+"")&&T(s,l)},d(t){t&&g(e),t&&g(n),t&&g(s)}}}function ae(e){let n;return{c(){n=x("None")},m(t,e){h(t,n,e)},p:t,d(t){t&&g(n)}}}function ue(t){let e,n,s,i=t[4].state.cvId2+"",l=t[7][t[4].state.cvId2].state.title+"";return{c(){e=x(i),n=I(),s=x(l)},m(t,i){h(t,e,i),h(t,n,i),h(t,s,i)},p(t,n){16&n[0]&&i!==(i=t[4].state.cvId2+"")&&T(e,i),144&n[0]&&l!==(l=t[7][t[4].state.cvId2].state.title+"")&&T(s,l)},d(t){t&&g(e),t&&g(n),t&&g(s)}}}function de(t){let e,n,s=!t[4].destroyed&&ie(t);return{c(){s&&s.c(),e=E()},m(t,i){s&&s.m(t,i),h(t,e,i),n=!0},p(t,n){t[4].destroyed?s&&(X(),tt(s,1,1,(()=>{s=null})),K()):s?(s.p(t,n),16&n[0]&&Z(s,1)):(s=ie(t),s.c(),Z(s,1),s.m(e.parentNode,e))},i(t){n||(Z(s),n=!0)},o(t){tt(s),n=!1},d(t){s&&s.d(t),t&&g(e)}}}function ce(t,e,n){let s,i,l,o,a,c,r,p;u(t,mt,(t=>n(6,s=t))),u(t,ct,(t=>n(7,i=t))),u(t,vt,(t=>n(8,l=t))),u(t,pt,(t=>n(32,a=t))),u(t,ht,(t=>n(61,c=t))),u(t,ft,(t=>n(62,r=t))),u(t,rt,(t=>n(33,p=t)));let f,v,y,m,h,g,$,b,w,{state:x={type:"vco",frequency:0,detune:0,shape:"sine",id:qt(),title:"Oscillator",cvId:null,cvId2:null}}=e;null==x.cvId2&&(x.cvId2=null),null==x.detune&&(x.detune=0);let I={x:320,y:420};d(ct,i[x.id]={},i);const E=i[x.id];let k,C;E.state=x,E.isAudio=!0,E.isControl=!1,E.showingHelp=!1,E.state.position||(E.state.position=Bt()),E.selectingCv=!1;let L,T=Math.log2(440),N=a.createOscillator();E.output=N,E.cv=N.frequency,E.cv2=N.detune,N.start(0);let q=!1,S=!1;var z;let A;window.addEventListener("mouseup",(()=>{q&&(q=!1)})),window.addEventListener("mousedown",(()=>{d(ht,c=!1,c),S=!1,m&&(m.style.outline="none")})),E.clearCurrents=()=>{n(25,k=null),n(29,z=null),n(26,C=null),n(30,A=null)};let H=Mt(1,{stiffness:.1,damping:.5});u(t,H,(t=>n(31,o=t)));let O=Mt(0,{stiffness:.3,damping:.2});function B(t){n(4,E.cvSelecting=t,E),Ht(E,t),h&&(E.selectingCv?n(4,E.selectingCv=!1,E):(n(4,E.selectingCv=!0,E),0==E.cvSelecting?n(23,h.style.opacity=.5,h):n(24,g.style.opacity=.5,g),d(mt,s=E.state.id,s)))}E.fade=()=>{H.set(.2)},E.unfade=()=>{H.set(1)},E.bob=()=>{O.set(10),setTimeout((()=>{O.set(0)}),50)},E.toggleHelp=()=>{n(4,E.showingHelp=!E.showingHelp,E),b&&(E.showingHelp?b.style.display="none":b.style.display="initial"),w&&(E.showingHelp?w.style.display="initial":w.style.display="none"),E.showingHelp?n(10,I={x:320,y:550}):n(10,I={x:320,y:420})},E.cvSelecting=null,E.select=t=>{E.selectingCv&&(0==E.cvSelecting?(n(4,E.state.cvId=t,E),n(23,h.style.opacity=1,h)):(n(4,E.state.cvId2=t,E),n(24,g.style.opacity=1,g)),n(4,E.selectingCv=!1,E)),d(mt,s=null,s),Ot()},E.bob();return t.$$set=t=>{"state"in t&&n(0,x=t.state)},t.$$.update=()=>{144&t.$$.dirty[0]&&(null!=E.state.cvId?n(25,k=i[E.state.cvId]):n(25,k=null)),144&t.$$.dirty[0]&&(null!=E.state.cvId2?n(26,C=i[E.state.cvId2]):n(26,C=null)),4&t.$$.dirty[1]&&p.voct&&n(27,T=p.voct),134217744&t.$$.dirty[0]&&n(5,L=Math.pow(2,T+E.state.frequency)),16&t.$$.dirty[0]&&n(28,N.type=E.state.shape,N),268435488&t.$$.dirty[0]|2&t.$$.dirty[1]&&N.frequency.linearRampToValueAtTime(L,a.currentTime+.03),268435472&t.$$.dirty[0]|2&t.$$.dirty[1]&&N.detune.linearRampToValueAtTime(E.state.detune,a.currentTime+.03),838860848&t.$$.dirty[0]|2&t.$$.dirty[1]&&(E.destroyed||(k?(N.frequency.cancelScheduledValues(a.currentTime),N.frequency.linearRampToValueAtTime(0,a.currentTime),z&&(z.outputs[E.state.id+".1"],z.removeOutput(E.state.id+".1",E.cv)),n(29,z=k),z.outputs[E.state.id+".1"]||z.addOutput(E.state.id+".1",E.cv)):(N.frequency.cancelScheduledValues(a.currentTime),N.frequency.linearRampToValueAtTime(L,a.currentTime),z&&z.outputs[E.state.id+".1"]&&z.removeOutput(E.state.id+".1",E.cv),n(29,z=null)))),536870960&t.$$.dirty[0]&&z&&z.setGain(E.state.id+".1",L),1409286160&t.$$.dirty[0]|2&t.$$.dirty[1]&&(E.destroyed||(C?(N.detune.cancelScheduledValues(a.currentTime),N.detune.linearRampToValueAtTime(0,a.currentTime+.01),A&&(A.outputs[E.state.id+".2"],A.removeOutput(E.state.id+".2",E.cv2)),n(30,A=C),A.outputs[E.state.id+".2"]||A.addOutput(E.state.id+".2",E.cv2)):(N.detune.cancelScheduledValues(a.currentTime),N.detune.linearRampToValueAtTime(E.state.detune,a.currentTime+.01),A&&A.outputs[E.state.id+".2"]&&A.removeOutput(E.state.id+".2",E.cv2),n(30,A=null)))),1073741840&t.$$.dirty[0]&&A&&A.setGain(E.state.id+".2",E.state.detune),2&t.$$.dirty[0]|1&t.$$.dirty[1]&&f&&n(1,f.style.opacity=`${o}`,f),25166224&t.$$.dirty[0]&&(E.destroyed||(h&&(null!=E.state.cvId?n(23,h.style.backgroundColor=l[i[E.state.cvId].state.type],h):n(23,h.style.backgroundColor="#f0f0f0",h)),g&&(null!=E.state.cvId2?n(24,g.style.backgroundColor=l[i[E.state.cvId2].state.type],g):n(24,g.style.backgroundColor="#f0f0f0",g)))),76&t.$$.dirty[0]&&v&&y&&(null!=s?(n(2,v.style.pointerEvents="none",v),n(3,y.style.pointerEvents="none",y)):(n(2,v.style.pointerEvents="all",v),n(3,y.style.pointerEvents="all",y)))},[x,f,v,y,E,L,s,i,l,$,I,O,function(t){n(1,f=t),f.addEventListener("mousedown",(()=>{q=!0})),f.addEventListener("mouseup",(()=>{q&&("output"==s?r.select(E.state.id):null==s||!i[s].selectingInput||s==E.state.id||"mixer"==i[s].state.type&&i[s].state.inputIds.includes(E.state.id)&&i[s].state.inputIds[i[s].inputSelecting]!=E.state.id?s==E.state.id&&E.select(null):i[s].select(E.state.id))}))},function(t){n(2,v=t)},function(t){n(3,y=t)},function(t){n(9,$=t)},function(t){m=t,m.addEventListener("mouseenter",(()=>{m.style.outline="2px solid #222222"})),m.addEventListener("mouseleave",(()=>{S||(m.style.outline="none")})),m.addEventListener("mousedown",(()=>{setTimeout((()=>{d(ht,c=!0,c),S=!0,m.style.outline="2px solid #222222"}),10)}))},function(t){n(23,h=t),h.addEventListener("mouseenter",(()=>{null==s&&n(23,h.style.opacity=.8,h)})),h.addEventListener("mouseleave",(()=>{null==s&&n(23,h.style.opacity=1,h)}))},function(t){n(24,g=t),g.addEventListener("mouseenter",(()=>{null==s&&n(24,g.style.opacity=.8,g)})),g.addEventListener("mouseleave",(()=>{null==s&&n(24,g.style.opacity=1,g)}))},function(t){w=t,w.style.display="none"},function(t){b=t},H,B,h,g,k,C,T,N,z,A,o,a,p,function(t){f=t,n(1,f),n(31,o)},function(t){v=t,n(2,v),n(3,y),n(6,s)},function(t){y=t,n(3,y),n(2,v),n(6,s)},function(t){$=t,n(9,$)},function(e){t.$$.not_equal(x.position,e)&&(x.position=e,n(0,x))},function(t){I=t,n(10,I)},function(t){O=t,n(11,O)},function(){i[E.state.id].state.title=this.textContent,ct.set(i)},()=>B(0),()=>{Ht(E,0)},()=>{null==s&&Ot()},function(){E.state.frequency=_(this.value),n(4,E)},()=>B(1),()=>{Ht(E,1)},()=>{null==s&&Ot()},function(){E.state.detune=_(this.value),n(4,E)},function(){E.state.shape=this.__value,n(4,E)},[[]],function(){E.state.shape=this.__value,n(4,E)},function(){E.state.shape=this.__value,n(4,E)},function(){E.state.shape=this.__value,n(4,E)},function(t){j[t?"unshift":"push"]((()=>{E.component=t,n(4,E)}))}]}class re extends at{constructor(t){super(),ot(this,t,ce,de,o,{state:0},null,[-1,-1,-1])}}function pe(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,$,w,E,L,_,S,z,A,H,O,B,F,M,P,D,R,G,J,W,Y,Q,X,K,lt,ot,at,ut,dt,ct,rt,pt,ft,vt,yt,mt,ht,gt=t[1].state.id+"",$t=t[1].state.title+"",bt=t[1].state.gain.toFixed(2)+"";function wt(e){t[30](e)}function xt(e){t[31](e)}function It(e){t[32](e)}function Et(e){t[33](e)}function kt(e){t[34](e)}function Ct(e){t[35](e)}function Lt(e){t[36](e)}let _t={};function Tt(t,e){return null!=t[1].state.inputId&&t[6][t[1].state.inputId]?ve:fe}void 0!==t[2]&&(_t.moduleNode=t[2]),void 0!==t[3]&&(_t.controlsNode=t[3]),void 0!==t[4]&&(_t.deleteNode=t[4]),void 0!==t[8]&&(_t.helpBtn=t[8]),void 0!==t[9]&&(_t.nodeSize=t[9]),void 0!==t[0].position&&(_t.nodePos=t[0].position),void 0!==t[10]&&(_t.bobSize=t[10]),n=new Xt({props:_t}),j.push((()=>et(n,"moduleNode",wt))),j.push((()=>et(n,"controlsNode",xt))),j.push((()=>et(n,"deleteNode",It))),j.push((()=>et(n,"helpBtn",Et))),j.push((()=>et(n,"nodeSize",kt))),j.push((()=>et(n,"nodePos",Ct))),j.push((()=>et(n,"bobSize",Lt))),y=new te({props:{module:t[1]}}),E=new se({props:{module:t[1]}});let Nt=Tt(t),qt=Nt(t);function St(t,e){return null!=t[1].state.cvId&&t[6][t[1].state.cvId]?me:ye}let zt=St(t),At=zt(t);return{c(){e=b("main"),nt(n.$$.fragment),p=I(),f=b("div"),v=b("div"),nt(y.$$.fragment),$=I(),w=b("div"),nt(E.$$.fragment),L=I(),_=b("h1"),S=x(gt),z=I(),A=b("div"),H=b("h2"),O=x($t),B=I(),F=b("div"),M=b("div"),P=b("label"),D=b("button"),qt.c(),R=x(" Input"),G=I(),J=b("div"),W=b("label"),Y=b("button"),At.c(),Q=x(" Control"),X=b("br"),K=I(),lt=b("label"),ot=x("Volume ("),at=x(bt),ut=x(")"),dt=b("input"),ct=I(),rt=b("div"),rt.innerHTML='<p class="svelte-1yeu6yr">Changes the volume of the input signal.<br/><br/>\n            Volume control can be automated using the Control selector.<br/><br/>\n            Selecting an Envelope causes the volume to rise and fall when a key is pressed.<br/><br/>\n            Selecting an LFO causes a tremolo effect.</p>',ft=I(),vt=b("br"),C(v,"class","delete svelte-1yeu6yr"),C(w,"class","help svelte-1yeu6yr"),C(H,"class","editableTitle svelte-1yeu6yr"),C(H,"contenteditable","true"),void 0===t[6][t[1].state.id].state.title&&U((()=>t[37].call(H))),C(D,"class","svelte-1yeu6yr"),C(M,"class","inputDiv"),C(Y,"class","svelte-1yeu6yr"),C(J,"class","inputDiv"),C(lt,"for","gain"),C(dt,"id","gain"),C(dt,"type","range"),C(dt,"min","0"),C(dt,"max","1"),C(dt,"step","0.001"),C(A,"id","controls"),C(f,"id","module"),C(f,"style",pt="background-color: "+t[7][t[1].state.type]),C(f,"class","svelte-1yeu6yr")},m(s,i){h(s,e,i),st(n,e,null),m(e,p),m(e,f),m(f,v),st(y,v,null),m(f,$),m(f,w),st(E,w,null),m(f,L),m(f,_),m(_,S),m(f,z),m(f,A),m(A,H),m(H,O),void 0!==t[6][t[1].state.id].state.title&&(H.textContent=t[6][t[1].state.id].state.title),m(A,B),m(A,F),m(F,M),m(M,P),m(P,D),qt.m(D,null),m(P,R),m(F,G),m(F,J),m(J,W),m(W,Y),At.m(Y,null),m(W,Q),m(F,X),m(F,K),m(F,lt),m(lt,ot),m(lt,at),m(lt,ut),m(F,dt),q(dt,t[1].state.gain),m(f,ct),m(f,rt),m(e,ft),m(e,vt),t[43](e),yt=!0,mt||(ht=[c(t[13].call(null,v)),c(t[17].call(null,w)),c(t[16].call(null,H)),k(H,"input",t[37]),c(t[14].call(null,D)),k(D,"click",t[21]),k(M,"mouseenter",t[38]),k(M,"mouseleave",t[39]),c(t[15].call(null,Y)),k(Y,"click",t[22]),k(J,"mouseenter",t[40]),k(J,"mouseleave",t[41]),k(dt,"change",t[42]),k(dt,"input",t[42]),c(t[18].call(null,F)),c(t[12].call(null,A)),c(t[19].call(null,rt)),c(t[11].call(null,f))],mt=!0)},p(t,e){const i={};!s&&4&e[0]&&(s=!0,i.moduleNode=t[2],V((()=>s=!1))),!l&&8&e[0]&&(l=!0,i.controlsNode=t[3],V((()=>l=!1))),!o&&16&e[0]&&(o=!0,i.deleteNode=t[4],V((()=>o=!1))),!a&&256&e[0]&&(a=!0,i.helpBtn=t[8],V((()=>a=!1))),!u&&512&e[0]&&(u=!0,i.nodeSize=t[9],V((()=>u=!1))),!d&&1&e[0]&&(d=!0,i.nodePos=t[0].position,V((()=>d=!1))),!r&&1024&e[0]&&(r=!0,i.bobSize=t[10],V((()=>r=!1))),n.$set(i);const c={};2&e[0]&&(c.module=t[1]),y.$set(c);const p={};2&e[0]&&(p.module=t[1]),E.$set(p),(!yt||2&e[0])&&gt!==(gt=t[1].state.id+"")&&T(S,gt),(!yt||2&e[0])&&$t!==($t=t[1].state.title+"")&&N(O,$t),66&e[0]&&t[6][t[1].state.id].state.title!==H.textContent&&(H.textContent=t[6][t[1].state.id].state.title),Nt===(Nt=Tt(t))&&qt?qt.p(t,e):(qt.d(1),qt=Nt(t),qt&&(qt.c(),qt.m(D,null))),zt===(zt=St(t))&&At?At.p(t,e):(At.d(1),At=zt(t),At&&(At.c(),At.m(Y,null))),(!yt||2&e[0])&&bt!==(bt=t[1].state.gain.toFixed(2)+"")&&T(at,bt),2&e[0]&&q(dt,t[1].state.gain),(!yt||130&e[0]&&pt!==(pt="background-color: "+t[7][t[1].state.type]))&&C(f,"style",pt)},i(t){yt||(Z(n.$$.fragment,t),Z(y.$$.fragment,t),Z(E.$$.fragment,t),yt=!0)},o(t){tt(n.$$.fragment,t),tt(y.$$.fragment,t),tt(E.$$.fragment,t),yt=!1},d(s){s&&g(e),it(n),it(y),it(E),qt.d(),At.d(),t[43](null),mt=!1,i(ht)}}}function fe(e){let n;return{c(){n=x("None")},m(t,e){h(t,n,e)},p:t,d(t){t&&g(n)}}}function ve(t){let e,n,s,i=t[1].state.inputId+"",l=t[6][t[1].state.inputId].state.title+"";return{c(){e=x(i),n=I(),s=x(l)},m(t,i){h(t,e,i),h(t,n,i),h(t,s,i)},p(t,n){2&n[0]&&i!==(i=t[1].state.inputId+"")&&T(e,i),66&n[0]&&l!==(l=t[6][t[1].state.inputId].state.title+"")&&T(s,l)},d(t){t&&g(e),t&&g(n),t&&g(s)}}}function ye(e){let n;return{c(){n=x("None")},m(t,e){h(t,n,e)},p:t,d(t){t&&g(n)}}}function me(t){let e,n,s,i=t[1].state.cvId+"",l=t[6][t[1].state.cvId].state.title+"";return{c(){e=x(i),n=I(),s=x(l)},m(t,i){h(t,e,i),h(t,n,i),h(t,s,i)},p(t,n){2&n[0]&&i!==(i=t[1].state.cvId+"")&&T(e,i),66&n[0]&&l!==(l=t[6][t[1].state.cvId].state.title+"")&&T(s,l)},d(t){t&&g(e),t&&g(n),t&&g(s)}}}function he(t){let e,n,s=!t[1].destroyed&&pe(t);return{c(){s&&s.c(),e=E()},m(t,i){s&&s.m(t,i),h(t,e,i),n=!0},p(t,n){t[1].destroyed?s&&(X(),tt(s,1,1,(()=>{s=null})),K()):s?(s.p(t,n),2&n[0]&&Z(s,1)):(s=pe(t),s.c(),Z(s,1),s.m(e.parentNode,e))},i(t){n||(Z(s),n=!0)},o(t){tt(s),n=!1},d(t){s&&s.d(t),t&&g(e)}}}function ge(t,e,n){let s,i,l,o,a,c,r;u(t,mt,(t=>n(5,s=t))),u(t,ct,(t=>n(6,i=t))),u(t,vt,(t=>n(7,l=t))),u(t,ht,(t=>n(49,a=t))),u(t,ft,(t=>n(50,c=t))),u(t,pt,(t=>n(29,r=t)));let{state:p={type:"vca",gain:1,id:qt(),inputId:null,cvId:null,title:"Amplifier"}}=e;d(ct,i[p.id]={},i);const f=i[p.id];let v,y,m,h,g,$,b,w,x;f.state=p,f.isAudio=!0,f.isControl=!1,f.state.position||(f.state.position=Bt());let I,E={x:280,y:310};f.selectingInput=!1,f.selectingCv=!1;var k,C,L=r.createGain();f.output=L,f.cv=L.gain,f.clearCurrents=()=>{n(26,k=null),n(25,I=null),n(27,C=null)};let T=!1,N=!1;window.addEventListener("mouseup",(()=>{T&&(T=!1)})),window.addEventListener("mousedown",(()=>{d(ht,a=!1,a),N=!1,$&&($.style.outline="none")}));let q=Mt(1,{stiffness:.1,damping:.5});u(t,q,(t=>n(28,o=t)));let S=Mt(0,{stiffness:.3,damping:.2});f.fade=()=>{q.set(.2)},f.halfFade=()=>{q.set(.8)},f.unfade=()=>{q.set(1)},f.bob=()=>{S.set(10),setTimeout((()=>{S.set(0)}),50)},f.toggleHelp=()=>{n(1,f.showingHelp=!f.showingHelp,f),w&&(f.showingHelp?w.style.display="none":w.style.display="initial"),x&&(f.showingHelp?x.style.display="initial":x.style.display="none"),f.showingHelp?n(9,E={x:280,y:420}):n(9,E={x:280,y:310})},f.select=t=>{f.selectingInput?(n(1,f.state.inputId=t,f),n(23,h.style.opacity=1,h),n(1,f.selectingInput=!1,f)):f.selectingCv&&(n(1,f.state.cvId=t,f),n(24,g.style.opacity=1,g),n(1,f.selectingCv=!1,f)),d(mt,s=null,s),Ot()},f.bob();return t.$$set=t=>{"state"in t&&n(0,p=t.state)},t.$$.update=()=>{66&t.$$.dirty[0]&&(null!=f.state.cvId?n(25,I=i[f.state.cvId]):n(25,I=null)),536870914&t.$$.dirty[0]&&L.gain.setValueAtTime(f.state.gain,r.currentTime),67108930&t.$$.dirty[0]&&(f.destroyed||(null!=f.state.inputId&&i[f.state.inputId]&&i[f.state.inputId].output?(k&&k.disconnect(L),n(26,k=i[f.state.inputId].output),k.connect(L),(i[f.state.inputId].input||i[f.state.inputId].inputs)&&i[f.state.inputId].update()):(k&&k.disconnect(L),n(26,k=null)))),704643074&t.$$.dirty[0]&&(f.destroyed||(I?(L.gain.cancelScheduledValues(r.currentTime),L.gain.setValueAtTime(0,r.currentTime),C&&(C.outputs[f.state.id+".1"],C.removeOutput(f.state.id+".1",f.cv)),n(27,C=I),C.outputs[f.state.id+".1"]||C.addOutput(f.state.id+".1",f.cv)):(L.gain.cancelScheduledValues(r.currentTime),L.gain.setValueAtTime(f.state.gain,r.currentTime),C&&C.outputs[f.state.id+".1"]&&C.removeOutput(f.state.id+".1",f.cv),n(27,C=null)))),134217730&t.$$.dirty[0]&&C&&C.setGain(f.state.id+".1",f.state.gain),268435460&t.$$.dirty[0]&&v&&n(2,v.style.opacity=`${o}`,v),25166018&t.$$.dirty[0]&&(f.destroyed||(h&&(null!=f.state.inputId?n(23,h.style.backgroundColor=l[i[f.state.inputId].state.type],h):n(23,h.style.backgroundColor="#f0f0f0",h)),g&&(null!=f.state.cvId?n(24,g.style.backgroundColor=l[i[f.state.cvId].state.type],g):n(24,g.style.backgroundColor="#f0f0f0",g)))),56&t.$$.dirty[0]&&y&&m&&(null!=s?(n(3,y.style.pointerEvents="none",y),n(4,m.style.pointerEvents="none",m)):(n(3,y.style.pointerEvents="all",y),n(4,m.style.pointerEvents="all",m)))},[p,f,v,y,m,s,i,l,b,E,S,function(t){n(2,v=t),v.addEventListener("mousedown",(()=>{T=!0})),v.addEventListener("mouseup",(()=>{T&&("output"==s?c.select(f.state.id):null==s||!i[s].selectingInput||s==f.state.id||"mixer"==i[s].state.type&&i[s].state.inputIds.includes(f.state.id)&&i[s].state.inputIds[i[s].inputSelecting]!=f.state.id?s==f.state.id&&f.select(null):i[s].select(f.state.id))}))},function(t){n(3,y=t)},function(t){n(4,m=t)},function(t){n(23,h=t),h.addEventListener("mouseenter",(()=>{null==s&&n(23,h.style.opacity=.8,h)})),h.addEventListener("mouseleave",(()=>{null==s&&n(23,h.style.opacity=1,h)}))},function(t){n(24,g=t),g.addEventListener("mouseenter",(()=>{null==s&&n(24,g.style.opacity=.8,g)})),g.addEventListener("mouseleave",(()=>{null==s&&n(24,g.style.opacity=1,g)}))},function(t){$=t,$.addEventListener("mouseenter",(()=>{$.style.outline="2px solid #222222"})),$.addEventListener("mouseleave",(()=>{N||($.style.outline="none")})),$.addEventListener("mousedown",(()=>{setTimeout((()=>{d(ht,a=!0,a),N=!0,$.style.outline="2px solid #222222"}),10)}))},function(t){n(8,b=t)},function(t){w=t},function(t){x=t,x.style.display="none"},q,function(){zt(f),h&&(f.selectingInput?n(1,f.selectingInput=!1,f):(n(1,f.selectingInput=!0,f),n(23,h.style.opacity=.5,h),d(mt,s=f.state.id,s)))},function(){Ht(f),g&&(f.selectingCv?n(1,f.selectingCv=!1,f):(n(1,f.selectingCv=!0,f),n(24,g.style.opacity=.5,g),d(mt,s=f.state.id,s)))},h,g,I,k,C,o,r,function(t){v=t,n(2,v),n(28,o)},function(t){y=t,n(3,y),n(4,m),n(5,s)},function(t){m=t,n(4,m),n(3,y),n(5,s)},function(t){b=t,n(8,b)},function(t){E=t,n(9,E)},function(e){t.$$.not_equal(p.position,e)&&(p.position=e,n(0,p))},function(t){S=t,n(10,S)},function(){i[f.state.id].state.title=this.textContent,ct.set(i)},()=>zt(f),()=>{null==s&&Ot()},()=>{Ht(f)},()=>{null==s&&Ot()},function(){f.state.gain=_(this.value),n(1,f)},function(t){j[t?"unshift":"push"]((()=>{f.component=t,n(1,f)}))}]}class $e extends at{constructor(t){super(),ot(this,t,ge,he,o,{state:0},null,[-1,-1])}}function be(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,$,w,E,L,_,S,z,A,H,O,B,F,M,P,D,R,G,J,W,Y,Q,X,K,lt,ot,at,ut,dt,ct,rt,pt,ft,vt,yt,mt,ht,gt,$t,bt,wt,xt,It,Et,kt,Ct=t[1].state.id+"",Lt=t[1].state.title+"",_t=t[7].toFixed(2)+"",Tt=t[8].toFixed(2)+"",Nt=t[1].state.sustain.toFixed(2)+"",qt=t[9].toFixed(2)+"";function St(e){t[25](e)}function zt(e){t[26](e)}function At(e){t[27](e)}function Ht(e){t[28](e)}function Ot(e){t[29](e)}function Bt(e){t[30](e)}function jt(e){t[31](e)}let Ft={hasTrigger:!0};return void 0!==t[2]&&(Ft.moduleNode=t[2]),void 0!==t[3]&&(Ft.controlsNode=t[3]),void 0!==t[4]&&(Ft.deleteNode=t[4]),void 0!==t[5]&&(Ft.helpBtn=t[5]),void 0!==t[6]&&(Ft.nodeSize=t[6]),void 0!==t[0].position&&(Ft.nodePos=t[0].position),void 0!==t[10]&&(Ft.bobSize=t[10]),n=new Xt({props:Ft}),j.push((()=>et(n,"moduleNode",St))),j.push((()=>et(n,"controlsNode",zt))),j.push((()=>et(n,"deleteNode",At))),j.push((()=>et(n,"helpBtn",Ht))),j.push((()=>et(n,"nodeSize",Ot))),j.push((()=>et(n,"nodePos",Bt))),j.push((()=>et(n,"bobSize",jt))),E=new te({props:{module:t[1]}}),S=new se({props:{module:t[1]}}),{c(){e=b("main"),nt(n.$$.fragment),p=I(),f=b("div"),v=b("h1"),y=x(Ct),$=I(),w=b("div"),nt(E.$$.fragment),L=I(),_=b("div"),nt(S.$$.fragment),z=I(),A=b("div"),H=b("h2"),O=x(Lt),B=I(),F=b("div"),M=b("div"),P=b("label"),D=x("Attack ("),R=x(_t),G=x("s)"),J=b("input"),W=I(),Y=b("label"),Q=x("Decay ("),X=x(Tt),K=x("s)"),lt=b("input"),ot=I(),at=b("label"),ut=x("Sustain ("),dt=x(Nt),ct=x(")"),rt=b("input"),pt=I(),ft=b("label"),vt=x("Release ("),yt=x(qt),mt=x("s)"),ht=b("input"),gt=I(),$t=b("div"),$t.innerHTML='<p class="svelte-n94yys">Can be selected as a Control option on other modules to automate parameters.<br/><br/>\n                When key is pressed, causes connected parameters to rise up to their maximum value and then fall.<br/><br/>\n                Attack - time it takes to rise to the maximum value when key is pressed.<br/><br/>\n                Decay - time it takes to fall to sustained value after maximum reached.<br/><br/>\n                Sustain - proportion of maximum value the parameter is sustained at while key is held.<br/><br/>\n                Release - time it takes to fall to minimum when key is released.<br/><br/></p>',wt=I(),xt=b("br"),C(w,"class","delete svelte-n94yys"),C(_,"class","help svelte-n94yys"),C(H,"class","editableTitle svelte-n94yys"),C(H,"contenteditable","true"),void 0===t[11][t[1].state.id].state.title&&U((()=>t[32].call(H))),C(P,"for","attack"),C(J,"id","attack"),C(J,"type","range"),C(J,"min","0"),C(J,"max","1"),C(J,"step","0.001"),C(Y,"for","decay"),C(lt,"id","decay"),C(lt,"type","range"),C(lt,"min","0"),C(lt,"max","1"),C(lt,"step","0.001"),C(at,"for","sustain"),C(rt,"id","sustain"),C(rt,"type","range"),C(rt,"min","0"),C(rt,"max","1"),C(rt,"step","0.001"),C(ft,"for","release"),C(ht,"id","release"),C(ht,"type","range"),C(ht,"min","0"),C(ht,"max","1"),C(ht,"step","0.001"),C(M,"class","params"),C(A,"id","controls"),C(f,"id","module"),C(f,"style",bt="background-color: "+t[12][t[1].state.type]),C(f,"class","svelte-n94yys")},m(s,i){h(s,e,i),st(n,e,null),m(e,p),m(e,f),m(f,v),m(v,y),m(f,$),m(f,w),st(E,w,null),m(f,L),m(f,_),st(S,_,null),m(f,z),m(f,A),m(A,H),m(H,O),void 0!==t[11][t[1].state.id].state.title&&(H.textContent=t[11][t[1].state.id].state.title),m(A,B),m(A,F),m(F,M),m(M,P),m(P,D),m(P,R),m(P,G),m(M,J),q(J,t[1].state.attack),m(M,W),m(M,Y),m(Y,Q),m(Y,X),m(Y,K),m(M,lt),q(lt,t[1].state.decay),m(M,ot),m(M,at),m(at,ut),m(at,dt),m(at,ct),m(M,rt),q(rt,t[1].state.sustain),m(M,pt),m(M,ft),m(ft,vt),m(ft,yt),m(ft,mt),m(M,ht),q(ht,t[1].state.release),m(f,gt),m(f,$t),m(e,wt),m(e,xt),t[37](e),It=!0,Et||(kt=[c(t[15].call(null,w)),c(t[17].call(null,_)),c(t[16].call(null,H)),k(H,"input",t[32]),k(J,"change",t[33]),k(J,"input",t[33]),k(lt,"change",t[34]),k(lt,"input",t[34]),k(rt,"change",t[35]),k(rt,"input",t[35]),k(ht,"change",t[36]),k(ht,"input",t[36]),c(t[19].call(null,F)),c(t[14].call(null,A)),c(t[18].call(null,$t)),c(t[13].call(null,f))],Et=!0)},p(t,e){const i={};!s&&4&e[0]&&(s=!0,i.moduleNode=t[2],V((()=>s=!1))),!l&&8&e[0]&&(l=!0,i.controlsNode=t[3],V((()=>l=!1))),!o&&16&e[0]&&(o=!0,i.deleteNode=t[4],V((()=>o=!1))),!a&&32&e[0]&&(a=!0,i.helpBtn=t[5],V((()=>a=!1))),!u&&64&e[0]&&(u=!0,i.nodeSize=t[6],V((()=>u=!1))),!d&&1&e[0]&&(d=!0,i.nodePos=t[0].position,V((()=>d=!1))),!r&&1024&e[0]&&(r=!0,i.bobSize=t[10],V((()=>r=!1))),n.$set(i),(!It||2&e[0])&&Ct!==(Ct=t[1].state.id+"")&&T(y,Ct);const c={};2&e[0]&&(c.module=t[1]),E.$set(c);const p={};2&e[0]&&(p.module=t[1]),S.$set(p),(!It||2&e[0])&&Lt!==(Lt=t[1].state.title+"")&&N(O,Lt),2050&e[0]&&t[11][t[1].state.id].state.title!==H.textContent&&(H.textContent=t[11][t[1].state.id].state.title),(!It||128&e[0])&&_t!==(_t=t[7].toFixed(2)+"")&&T(R,_t),2&e[0]&&q(J,t[1].state.attack),(!It||256&e[0])&&Tt!==(Tt=t[8].toFixed(2)+"")&&T(X,Tt),2&e[0]&&q(lt,t[1].state.decay),(!It||2&e[0])&&Nt!==(Nt=t[1].state.sustain.toFixed(2)+"")&&T(dt,Nt),2&e[0]&&q(rt,t[1].state.sustain),(!It||512&e[0])&&qt!==(qt=t[9].toFixed(2)+"")&&T(yt,qt),2&e[0]&&q(ht,t[1].state.release),(!It||4098&e[0]&&bt!==(bt="background-color: "+t[12][t[1].state.type]))&&C(f,"style",bt)},i(t){It||(Z(n.$$.fragment,t),Z(E.$$.fragment,t),Z(S.$$.fragment,t),It=!0)},o(t){tt(n.$$.fragment,t),tt(E.$$.fragment,t),tt(S.$$.fragment,t),It=!1},d(s){s&&g(e),it(n),it(E),it(S),t[37](null),Et=!1,i(kt)}}}function we(t){let e,n,s=!t[1].destroyed&&be(t);return{c(){s&&s.c(),e=E()},m(t,i){s&&s.m(t,i),h(t,e,i),n=!0},p(t,n){t[1].destroyed?s&&(X(),tt(s,1,1,(()=>{s=null})),K()):s?(s.p(t,n),2&n[0]&&Z(s,1)):(s=be(t),s.c(),Z(s,1),s.m(e.parentNode,e))},i(t){n||(Z(s),n=!0)},o(t){tt(s),n=!1},d(t){s&&s.d(t),t&&g(e)}}}function xe(t,e,n){let s,i,l,o,a,c,r;u(t,mt,(t=>n(22,s=t))),u(t,ht,(t=>n(44,l=t))),u(t,ct,(t=>n(11,o=t))),u(t,rt,(t=>n(24,a=t))),u(t,pt,(t=>n(45,c=t))),u(t,vt,(t=>n(12,r=t)));let{state:p={type:"adsr",attack:.1,decay:.1,sustain:.5,release:.1,id:qt(),title:"Envelope"}}=e;d(ct,o[p.id]={},o);const f=o[p.id];f.state=p,f.isAudio=!1,f.isControl=!0,f.state.position||(f.state.position=Bt()),f.outputs={};let v,y,m,h,g,$,b,w,x,I,E={},k={x:280,y:400},C=!1;const L=()=>{Object.entries(f.outputs).forEach((([t,e])=>{e.cancelScheduledValues(c.currentTime),e.setValueAtTime(E[t]*f.state.sustain,c.currentTime),e.linearRampToValueAtTime(0,c.currentTime+I)}))};f.addOutput=(t,e)=>{n(1,f.outputs[t]=e,f),E[t]=1,L()},f.removeOutput=t=>{delete f.outputs[t]},f.setGain=(t,e)=>{E[t]=e};let T=!1,N=!1;window.addEventListener("mouseup",(()=>{T&&(T=!1)})),window.addEventListener("mousedown",(()=>{d(ht,l=!1,l),N=!1,h&&(h.style.outline="none")}));let q=Mt(1,{stiffness:.1,damping:.5});u(t,q,(t=>n(23,i=t)));let S=Mt(0,{stiffness:.3,damping:.2});return f.fade=()=>{q.set(.2)},f.halfFade=()=>{q.set(.8)},f.unfade=()=>{q.set(1)},f.bob=()=>{S.set(10),setTimeout((()=>{S.set(0)}),50)},f.toggleHelp=()=>{n(1,f.showingHelp=!f.showingHelp,f),b&&(f.showingHelp?b.style.display="none":b.style.display="initial"),$&&(f.showingHelp?$.style.display="initial":$.style.display="none"),f.showingHelp?n(6,k={x:280,y:650}):n(6,k={x:280,y:400})},f.bob(),t.$$set=t=>{"state"in t&&n(0,p=t.state)},t.$$.update=()=>{2&t.$$.dirty[0]&&n(7,w=Math.pow(10,f.state.attack)-1),2&t.$$.dirty[0]&&n(8,x=Math.pow(10,f.state.decay)-1),2&t.$$.dirty[0]&&n(9,I=Math.pow(10,f.state.release)-1),18874368&t.$$.dirty[0]&&a.trigger&&!C&&n(21,C=!0),18874368&t.$$.dirty[0]&&!a.trigger&&C&&n(21,C=!1),2097152&t.$$.dirty[0]&&(C?Object.entries(f.outputs).forEach((([t,e])=>{e.cancelScheduledValues(c.currentTime),e.setValueAtTime(0,c.currentTime),e.linearRampToValueAtTime(E[t],c.currentTime+w),e.linearRampToValueAtTime(E[t]*f.state.sustain,c.currentTime+w+x)})):L()),8388612&t.$$.dirty[0]&&v&&n(2,v.style.opacity=`${i}`,v),4194328&t.$$.dirty[0]&&y&&m&&(null!=s?(n(3,y.style.pointerEvents="none",y),n(4,m.style.pointerEvents="none",m)):(n(3,y.style.pointerEvents="all",y),n(4,m.style.pointerEvents="all",m)))},[p,f,v,y,m,g,k,w,x,I,S,o,r,function(t){n(2,v=t),v.addEventListener("mousedown",(()=>{T=!0})),v.addEventListener("mouseup",(()=>{T&&null!=s&&o[s].selectingCv&&o[s].select(f.state.id)}))},function(t){n(3,y=t)},function(t){n(4,m=t)},function(t){h=t,h.addEventListener("mouseenter",(()=>{h.style.outline="2px solid #222222"})),h.addEventListener("mouseleave",(()=>{N||(h.style.outline="none")})),h.addEventListener("mousedown",(()=>{setTimeout((()=>{d(ht,l=!0,l),N=!0,h.style.outline="2px solid #222222"}),10)}))},function(t){n(5,g=t)},function(t){$=t,$.style.display="none"},function(t){b=t},q,C,s,i,a,function(t){v=t,n(2,v),n(23,i)},function(t){y=t,n(3,y),n(4,m),n(22,s)},function(t){m=t,n(4,m),n(3,y),n(22,s)},function(t){g=t,n(5,g)},function(t){k=t,n(6,k)},function(e){t.$$.not_equal(p.position,e)&&(p.position=e,n(0,p))},function(t){S=t,n(10,S)},function(){o[f.state.id].state.title=this.textContent,ct.set(o)},function(){f.state.attack=_(this.value),n(1,f)},function(){f.state.decay=_(this.value),n(1,f)},function(){f.state.sustain=_(this.value),n(1,f)},function(){f.state.release=_(this.value),n(1,f)},function(t){j[t?"unshift":"push"]((()=>{f.component=t,n(1,f)}))}]}class Ie extends at{constructor(t){super(),ot(this,t,xe,we,o,{state:0},null,[-1,-1])}}function Ee(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,$,w,E,_,S,z,A,H,O,B,F,M,P,D,R,G,J,W,Y,Q,X,K,lt,ot,at,ut,dt,ct,rt,pt,ft,vt,yt,mt,ht,gt,$t,bt,wt,xt,It,Et,kt,Ct,Lt,_t,Tt,Nt,qt,St,zt,At,Ht,Ot,Bt,jt,Ft,Mt=t[1].state.id+"",Pt=t[1].state.title+"",Dt=t[5].toFixed(1)+"";function Ut(e){t[32](e)}function Vt(e){t[33](e)}function Rt(e){t[34](e)}function Gt(e){t[35](e)}function Jt(e){t[36](e)}function Wt(e){t[37](e)}function Yt(e){t[38](e)}let Qt={};function Kt(t,e){return null!=t[1].state.inputId&&t[7][t[1].state.inputId]?Ce:ke}void 0!==t[2]&&(Qt.moduleNode=t[2]),void 0!==t[3]&&(Qt.controlsNode=t[3]),void 0!==t[4]&&(Qt.deleteNode=t[4]),void 0!==t[9]&&(Qt.helpBtn=t[9]),void 0!==t[10]&&(Qt.nodeSize=t[10]),void 0!==t[0].position&&(Qt.nodePos=t[0].position),void 0!==t[11]&&(Qt.bobSize=t[11]),n=new Xt({props:Qt}),j.push((()=>et(n,"moduleNode",Ut))),j.push((()=>et(n,"controlsNode",Vt))),j.push((()=>et(n,"deleteNode",Rt))),j.push((()=>et(n,"helpBtn",Gt))),j.push((()=>et(n,"nodeSize",Jt))),j.push((()=>et(n,"nodePos",Wt))),j.push((()=>et(n,"bobSize",Yt))),E=new te({props:{module:t[1]}}),z=new se({props:{module:t[1]}});let Zt=Kt(t),ee=Zt(t);function ne(t,e){return null!=t[1].state.cvId&&t[7][t[1].state.cvId]?_e:Le}let ie=ne(t),le=ie(t);return Bt=L(t[46][0]),{c(){e=b("main"),nt(n.$$.fragment),p=I(),f=b("div"),v=b("h1"),y=x(Mt),$=I(),w=b("div"),nt(E.$$.fragment),_=I(),S=b("div"),nt(z.$$.fragment),A=I(),H=b("div"),O=b("h2"),B=x(Pt),F=I(),M=b("div"),P=b("div"),D=b("label"),R=b("button"),ee.c(),G=x(" Input"),J=I(),W=b("div"),Y=b("label"),Q=b("button"),le.c(),X=x(" Control"),K=b("br"),lt=I(),ot=b("label"),at=x("Cutoff Frequency ("),ut=x(Dt),dt=x("Hz)"),ct=b("input"),rt=I(),pt=b("br"),ft=b("section"),vt=b("input"),mt=b("label"),ht=x("Lowpass"),$t=I(),bt=b("input"),xt=b("label"),It=x("Highpass"),kt=I(),Ct=b("input"),_t=b("label"),Tt=x("Bandpass"),qt=I(),St=b("div"),St.innerHTML='<p class="svelte-im3yse">Changes the timbre of an input signal by cutting out a range of frequencies.<br/><br/>\n                Cutoff frequency changes the range of frequencies that are cut out, and can be automated with a Control module.<br/><br/>\n                Lowpass mode cuts out frequencies above the cutoff.<br/><br/>\n                Highpass mode cuts out frequencies below the cutoff.<br/><br/>\n                Bandpass mode only preserves frequencies near to the cutoff.<br/><br/></p>',At=I(),Ht=b("br"),C(w,"class","delete svelte-im3yse"),C(S,"class","help svelte-im3yse"),C(O,"class","editableTitle svelte-im3yse"),C(O,"contenteditable","true"),void 0===t[7][t[1].state.id].state.title&&U((()=>t[39].call(O))),C(R,"class","svelte-im3yse"),C(P,"class","inputDiv"),C(Q,"class","svelte-im3yse"),C(W,"class","inputDiv"),C(ot,"for","freq"),C(ct,"id","freq"),C(ct,"type","range"),C(ct,"min",Math.log2(20)),C(ct,"max",Math.log2(18e3)),C(ct,"step","0.0001"),C(vt,"id",yt="lowpass"+t[1].state.id),C(vt,"type","radio"),vt.__value="lowpass",vt.value=vt.__value,C(vt,"class","svelte-im3yse"),C(mt,"for",gt="lowpass"+t[1].state.id),C(mt,"class","svelte-im3yse"),C(bt,"id",wt="highpass"+t[1].state.id),C(bt,"type","radio"),bt.__value="highpass",bt.value=bt.__value,C(bt,"class","svelte-im3yse"),C(xt,"for",Et="highpass"+t[1].state.id),C(xt,"class","svelte-im3yse"),C(Ct,"id",Lt="bandpass"+t[1].state.id),C(Ct,"type","radio"),Ct.__value="bandpass",Ct.value=Ct.__value,C(Ct,"class","svelte-im3yse"),C(_t,"for",Nt="bandpass"+t[1].state.id),C(_t,"class","svelte-im3yse"),C(ft,"class","type svelte-im3yse"),C(H,"id","controls"),C(f,"id","module"),C(f,"style",zt="background-color: "+t[8][t[1].state.type]),C(f,"class","svelte-im3yse"),Bt.p(vt,bt,Ct)},m(s,i){h(s,e,i),st(n,e,null),m(e,p),m(e,f),m(f,v),m(v,y),m(f,$),m(f,w),st(E,w,null),m(f,_),m(f,S),st(z,S,null),m(f,A),m(f,H),m(H,O),m(O,B),void 0!==t[7][t[1].state.id].state.title&&(O.textContent=t[7][t[1].state.id].state.title),m(H,F),m(H,M),m(M,P),m(P,D),m(D,R),ee.m(R,null),m(D,G),m(M,J),m(M,W),m(W,Y),m(Y,Q),le.m(Q,null),m(Y,X),m(M,K),m(M,lt),m(M,ot),m(ot,at),m(ot,ut),m(ot,dt),m(M,ct),q(ct,t[1].state.voct),m(M,rt),m(M,pt),m(M,ft),m(ft,vt),vt.checked=vt.__value===t[1].state.filterType,m(ft,mt),m(mt,ht),m(ft,$t),m(ft,bt),bt.checked=bt.__value===t[1].state.filterType,m(ft,xt),m(xt,It),m(ft,kt),m(ft,Ct),Ct.checked=Ct.__value===t[1].state.filterType,m(ft,_t),m(_t,Tt),m(f,qt),m(f,St),m(e,At),m(e,Ht),t[49](e),Ot=!0,jt||(Ft=[c(t[14].call(null,w)),c(t[18].call(null,S)),c(t[17].call(null,O)),k(O,"input",t[39]),c(t[15].call(null,R)),k(R,"click",t[22]),k(P,"mouseenter",t[40]),k(P,"mouseleave",t[41]),c(t[16].call(null,Q)),k(Q,"click",t[23]),k(W,"mouseenter",t[42]),k(W,"mouseleave",t[43]),k(ct,"change",t[44]),k(ct,"input",t[44]),k(vt,"change",t[45]),k(bt,"change",t[47]),k(Ct,"change",t[48]),c(t[20].call(null,M)),c(t[13].call(null,H)),c(t[19].call(null,St)),c(t[12].call(null,f))],jt=!0)},p(t,e){const i={};!s&&4&e[0]&&(s=!0,i.moduleNode=t[2],V((()=>s=!1))),!l&&8&e[0]&&(l=!0,i.controlsNode=t[3],V((()=>l=!1))),!o&&16&e[0]&&(o=!0,i.deleteNode=t[4],V((()=>o=!1))),!a&&512&e[0]&&(a=!0,i.helpBtn=t[9],V((()=>a=!1))),!u&&1024&e[0]&&(u=!0,i.nodeSize=t[10],V((()=>u=!1))),!d&&1&e[0]&&(d=!0,i.nodePos=t[0].position,V((()=>d=!1))),!r&&2048&e[0]&&(r=!0,i.bobSize=t[11],V((()=>r=!1))),n.$set(i),(!Ot||2&e[0])&&Mt!==(Mt=t[1].state.id+"")&&T(y,Mt);const c={};2&e[0]&&(c.module=t[1]),E.$set(c);const p={};2&e[0]&&(p.module=t[1]),z.$set(p),(!Ot||2&e[0])&&Pt!==(Pt=t[1].state.title+"")&&N(B,Pt),130&e[0]&&t[7][t[1].state.id].state.title!==O.textContent&&(O.textContent=t[7][t[1].state.id].state.title),Zt===(Zt=Kt(t))&&ee?ee.p(t,e):(ee.d(1),ee=Zt(t),ee&&(ee.c(),ee.m(R,null))),ie===(ie=ne(t))&&le?le.p(t,e):(le.d(1),le=ie(t),le&&(le.c(),le.m(Q,null))),(!Ot||32&e[0])&&Dt!==(Dt=t[5].toFixed(1)+"")&&T(ut,Dt),2&e[0]&&q(ct,t[1].state.voct),(!Ot||2&e[0]&&yt!==(yt="lowpass"+t[1].state.id))&&C(vt,"id",yt),2&e[0]&&(vt.checked=vt.__value===t[1].state.filterType),(!Ot||2&e[0]&&gt!==(gt="lowpass"+t[1].state.id))&&C(mt,"for",gt),(!Ot||2&e[0]&&wt!==(wt="highpass"+t[1].state.id))&&C(bt,"id",wt),2&e[0]&&(bt.checked=bt.__value===t[1].state.filterType),(!Ot||2&e[0]&&Et!==(Et="highpass"+t[1].state.id))&&C(xt,"for",Et),(!Ot||2&e[0]&&Lt!==(Lt="bandpass"+t[1].state.id))&&C(Ct,"id",Lt),2&e[0]&&(Ct.checked=Ct.__value===t[1].state.filterType),(!Ot||2&e[0]&&Nt!==(Nt="bandpass"+t[1].state.id))&&C(_t,"for",Nt),(!Ot||258&e[0]&&zt!==(zt="background-color: "+t[8][t[1].state.type]))&&C(f,"style",zt)},i(t){Ot||(Z(n.$$.fragment,t),Z(E.$$.fragment,t),Z(z.$$.fragment,t),Ot=!0)},o(t){tt(n.$$.fragment,t),tt(E.$$.fragment,t),tt(z.$$.fragment,t),Ot=!1},d(s){s&&g(e),it(n),it(E),it(z),ee.d(),le.d(),t[49](null),Bt.r(),jt=!1,i(Ft)}}}function ke(e){let n;return{c(){n=x("None")},m(t,e){h(t,n,e)},p:t,d(t){t&&g(n)}}}function Ce(t){let e,n,s,i=t[1].state.inputId+"",l=t[7][t[1].state.inputId].state.title+"";return{c(){e=x(i),n=I(),s=x(l)},m(t,i){h(t,e,i),h(t,n,i),h(t,s,i)},p(t,n){2&n[0]&&i!==(i=t[1].state.inputId+"")&&T(e,i),130&n[0]&&l!==(l=t[7][t[1].state.inputId].state.title+"")&&T(s,l)},d(t){t&&g(e),t&&g(n),t&&g(s)}}}function Le(e){let n;return{c(){n=x("None")},m(t,e){h(t,n,e)},p:t,d(t){t&&g(n)}}}function _e(t){let e,n,s,i=t[1].state.cvId+"",l=t[7][t[1].state.cvId].state.title+"";return{c(){e=x(i),n=I(),s=x(l)},m(t,i){h(t,e,i),h(t,n,i),h(t,s,i)},p(t,n){2&n[0]&&i!==(i=t[1].state.cvId+"")&&T(e,i),130&n[0]&&l!==(l=t[7][t[1].state.cvId].state.title+"")&&T(s,l)},d(t){t&&g(e),t&&g(n),t&&g(s)}}}function Te(t){let e,n,s=!t[1].destroyed&&Ee(t);return{c(){s&&s.c(),e=E()},m(t,i){s&&s.m(t,i),h(t,e,i),n=!0},p(t,n){t[1].destroyed?s&&(X(),tt(s,1,1,(()=>{s=null})),K()):s?(s.p(t,n),2&n[0]&&Z(s,1)):(s=Ee(t),s.c(),Z(s,1),s.m(e.parentNode,e))},i(t){n||(Z(s),n=!0)},o(t){tt(s),n=!1},d(t){s&&s.d(t),t&&g(e)}}}function Ne(t,e,n){let s,i,l,o,a,c,r;u(t,mt,(t=>n(6,s=t))),u(t,ct,(t=>n(7,i=t))),u(t,vt,(t=>n(8,l=t))),u(t,ht,(t=>n(55,a=t))),u(t,ft,(t=>n(56,c=t))),u(t,pt,(t=>n(31,r=t)));let{state:p={type:"vcf",voct:Math.log2(18e3),filterType:"lowpass",id:qt(),inputId:null,cvId:null,title:"Filter"}}=e;d(ct,i[p.id]={},i);const f=i[p.id];let v,y,m,h,g,$,b,w,x;f.state=p,f.isAudio=!0,f.isControl=!1,f.state.position||(f.state.position=Bt());let I,E={x:280,y:350};f.selectingInput=!1,f.selectingCv=!1;var k,C,L,T=r.createBiquadFilter();f.output=T,f.cv=T.frequency,f.clearCurrents=()=>{n(28,C=null),n(26,I=null),n(29,L=null)};let N=!1,q=!1;window.addEventListener("mouseup",(()=>{N&&(N=!1)})),window.addEventListener("mousedown",(()=>{d(ht,a=!1,a),q=!1,$&&($.style.outline="none")}));let S=Mt(1,{stiffness:.1,damping:.5});u(t,S,(t=>n(30,o=t)));let z=Mt(0,{stiffness:.3,damping:.2});f.fade=()=>{S.set(.2)},f.halfFade=()=>{S.set(.8)},f.unfade=()=>{S.set(1)},f.bob=()=>{z.set(10),setTimeout((()=>{z.set(0)}),50)},f.toggleHelp=()=>{n(1,f.showingHelp=!f.showingHelp,f),x&&(f.showingHelp?x.style.display="none":x.style.display="initial"),w&&(f.showingHelp?w.style.display="initial":w.style.display="none"),f.showingHelp?n(10,E={x:280,y:560}):n(10,E={x:280,y:350})},f.select=t=>{f.selectingInput?(n(1,f.state.inputId=t,f),n(24,h.style.opacity=1,h),n(1,f.selectingInput=!1,f)):f.selectingCv&&(n(1,f.state.cvId=t,f),n(25,g.style.opacity=1,g),n(1,f.selectingCv=!1,f)),d(mt,s=null,s),Ot()},f.bob();return t.$$set=t=>{"state"in t&&n(0,p=t.state)},t.$$.update=()=>{if(130&t.$$.dirty[0]&&(null!=f.state.cvId?n(26,I=i[f.state.cvId]):n(26,I=null)),2&t.$$.dirty[0]&&n(5,k=Math.pow(2,f.state.voct)),2&t.$$.dirty[0]&&n(27,T.type=f.state.filterType,T),134217760&t.$$.dirty[0]|1&t.$$.dirty[1]&&T.frequency.setValueAtTime(k,r.currentTime),402653314&t.$$.dirty[0]&&!f.destroyed)if(null!=f.state.inputId&&i[f.state.inputId]&&i[f.state.inputId].output){let t=i[f.state.inputId];C&&C.disconnect(T),n(28,C=t.output),C.connect(T)}else C&&C.disconnect(T),n(28,C=null);738197538&t.$$.dirty[0]|1&t.$$.dirty[1]&&(f.destroyed||(I?(T.frequency.cancelScheduledValues(r.currentTime),T.frequency.setValueAtTime(0,r.currentTime),L&&(L.outputs[f.state.id+".1"],L.removeOutput(f.state.id+".1",f.cv)),n(29,L=I),L.outputs[f.state.id+".1"]||L.addOutput(f.state.id+".1",f.cv)):(T.frequency.cancelScheduledValues(r.currentTime),T.frequency.setValueAtTime(k,r.currentTime),L&&(L.outputs[f.state.id+".1"],L.removeOutput(f.state.id+".1",f.cv)),n(29,L=null)))),536870946&t.$$.dirty[0]&&L&&L.setGain(f.state.id+".1",k),1073741828&t.$$.dirty[0]&&v&&n(2,v.style.opacity=`${o}`,v),50332034&t.$$.dirty[0]&&(f.destroyed||(h&&(null!=f.state.inputId?n(24,h.style.backgroundColor=l[i[f.state.inputId].state.type],h):n(24,h.style.backgroundColor="#f0f0f0",h)),g&&(null!=f.state.cvId?n(25,g.style.backgroundColor=l[i[f.state.cvId].state.type],g):n(25,g.style.backgroundColor="#f0f0f0",g)))),88&t.$$.dirty[0]&&y&&m&&(null!=s?(n(3,y.style.pointerEvents="none",y),n(4,m.style.pointerEvents="none",m)):(n(3,y.style.pointerEvents="all",y),n(4,m.style.pointerEvents="all",m)))},[p,f,v,y,m,k,s,i,l,b,E,z,function(t){n(2,v=t),v.addEventListener("mousedown",(()=>{N=!0})),v.addEventListener("mouseup",(()=>{N&&("output"==s?c.select(f.state.id):null==s||!i[s].selectingInput||s==f.state.id||"mixer"==i[s].state.type&&i[s].state.inputIds.includes(f.state.id)&&i[s].state.inputIds[i[s].inputSelecting]!=f.state.id?s==f.state.id&&f.select(null):i[s].select(f.state.id))}))},function(t){n(3,y=t)},function(t){n(4,m=t)},function(t){n(24,h=t),h.addEventListener("mouseenter",(()=>{null==s&&n(24,h.style.opacity=.8,h)})),h.addEventListener("mouseleave",(()=>{null==s&&n(24,h.style.opacity=1,h)}))},function(t){n(25,g=t),g.addEventListener("mouseenter",(()=>{null==s&&n(25,g.style.opacity=.8,g)})),g.addEventListener("mouseleave",(()=>{null==s&&n(25,g.style.opacity=1,g)}))},function(t){$=t,$.addEventListener("mouseenter",(()=>{$.style.outline="2px solid #222222"})),$.addEventListener("mouseleave",(()=>{q||($.style.outline="none")})),$.addEventListener("mousedown",(()=>{setTimeout((()=>{d(ht,a=!0,a),q=!0,$.style.outline="2px solid #222222"}),10)}))},function(t){n(9,b=t)},function(t){w=t,w.style.display="none"},function(t){x=t},S,function(){zt(f),h&&(f.selectingInput?n(1,f.selectingInput=!1,f):(n(1,f.selectingInput=!0,f),n(24,h.style.opacity=.5,h),d(mt,s=f.state.id,s)))},function(){Ht(f),g&&(f.selectingCv?n(1,f.selectingCv=!1,f):(n(1,f.selectingCv=!0,f),n(25,g.style.opacity=.5,g),d(mt,s=f.state.id,s)))},h,g,I,T,C,L,o,r,function(t){v=t,n(2,v),n(30,o)},function(t){y=t,n(3,y),n(4,m),n(6,s)},function(t){m=t,n(4,m),n(3,y),n(6,s)},function(t){b=t,n(9,b)},function(t){E=t,n(10,E)},function(e){t.$$.not_equal(p.position,e)&&(p.position=e,n(0,p))},function(t){z=t,n(11,z)},function(){i[f.state.id].state.title=this.textContent,ct.set(i)},()=>zt(f),()=>{null==s&&Ot()},()=>{Ht(f)},()=>{null==s&&Ot()},function(){f.state.voct=_(this.value),n(1,f)},function(){f.state.filterType=this.__value,n(1,f)},[[]],function(){f.state.filterType=this.__value,n(1,f)},function(){f.state.filterType=this.__value,n(1,f)},function(t){j[t?"unshift":"push"]((()=>{f.component=t,n(1,f)}))}]}class qe extends at{constructor(t){super(),ot(this,t,Ne,Te,o,{state:0},null,[-1,-1])}}function Se(t,e,n){const s=t.slice();return s[45]=e[n],s[47]=n,s}function ze(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,w,E,L,_,q,S,z,A,H,O,B,F,M,P,D,R,G,J,W,Y,Q,X,K,lt=t[0].state.id+"",ot=t[0].state.title+"";function at(e){t[24](e)}function ut(e){t[25](e)}function dt(e){t[26](e)}function ct(e){t[27](e)}function rt(e){t[28](e)}function pt(e){t[29](e)}function ft(e){t[30](e)}let vt={};void 0!==t[1]&&(vt.moduleNode=t[1]),void 0!==t[2]&&(vt.controlsNode=t[2]),void 0!==t[3]&&(vt.deleteNode=t[3]),void 0!==t[7]&&(vt.helpBtn=t[7]),void 0!==t[8]&&(vt.nodeSize=t[8]),void 0!==t[0].state.position&&(vt.nodePos=t[0].state.position),void 0!==t[9]&&(vt.bobSize=t[9]),n=new Xt({props:vt}),j.push((()=>et(n,"moduleNode",at))),j.push((()=>et(n,"controlsNode",ut))),j.push((()=>et(n,"deleteNode",dt))),j.push((()=>et(n,"helpBtn",ct))),j.push((()=>et(n,"nodeSize",rt))),j.push((()=>et(n,"nodePos",pt))),j.push((()=>et(n,"bobSize",ft))),y=new te({props:{module:t[0]}}),L=new se({props:{module:t[0]}});let yt=t[0].state.inputIds,mt=[];for(let e=0;e<yt.length;e+=1)mt[e]=Oe(Se(t,yt,e));return{c(){e=b("main"),nt(n.$$.fragment),p=I(),f=b("div"),v=b("div"),nt(y.$$.fragment),w=I(),E=b("div"),nt(L.$$.fragment),_=I(),q=b("h1"),S=x(lt),z=I(),A=b("div"),H=b("h2"),O=x(ot),B=I(),F=b("div"),M=b("label"),P=x("Inputs\r\n    "),D=b("div");for(let t=0;t<mt.length;t+=1)mt[t].c();R=I(),G=b("div"),G.innerHTML='<p class="svelte-1mlbx33">Combines inputs together into one signal, allowing for more complex, multi-layered synth patches.<br/><br/></p>',W=I(),Y=b("br"),C(v,"class","delete svelte-1mlbx33"),C(E,"class","help svelte-1mlbx33"),C(H,"class","editableTitle svelte-1mlbx33"),C(H,"contenteditable","true"),void 0===t[5][t[0].state.id].state.title&&U((()=>t[31].call(H))),C(D,"id","inputs"),C(M,"for","inputs"),C(M,"class","svelte-1mlbx33"),C(A,"id","controls"),C(f,"id","module"),C(f,"style",J="background-color: "+t[6][t[0].state.type]),C(f,"class","svelte-1mlbx33")},m(s,i){h(s,e,i),st(n,e,null),m(e,p),m(e,f),m(f,v),st(y,v,null),m(f,w),m(f,E),st(L,E,null),m(f,_),m(f,q),m(q,S),m(f,z),m(f,A),m(A,H),m(H,O),void 0!==t[5][t[0].state.id].state.title&&(H.textContent=t[5][t[0].state.id].state.title),m(A,B),m(A,F),m(F,M),m(M,P),m(M,D);for(let t=0;t<mt.length;t+=1)mt[t]&&mt[t].m(D,null);m(f,R),m(f,G),m(e,W),m(e,Y),t[35](e),Q=!0,X||(K=[c(t[12].call(null,v)),c(t[15].call(null,E)),c(t[14].call(null,H)),k(H,"input",t[31]),c(t[17].call(null,F)),c(t[11].call(null,A)),c(t[16].call(null,G)),c(t[10].call(null,f))],X=!0)},p(t,e){const i={};!s&&2&e[0]&&(s=!0,i.moduleNode=t[1],V((()=>s=!1))),!l&&4&e[0]&&(l=!0,i.controlsNode=t[2],V((()=>l=!1))),!o&&8&e[0]&&(o=!0,i.deleteNode=t[3],V((()=>o=!1))),!a&&128&e[0]&&(a=!0,i.helpBtn=t[7],V((()=>a=!1))),!u&&256&e[0]&&(u=!0,i.nodeSize=t[8],V((()=>u=!1))),!d&&1&e[0]&&(d=!0,i.nodePos=t[0].state.position,V((()=>d=!1))),!r&&512&e[0]&&(r=!0,i.bobSize=t[9],V((()=>r=!1))),n.$set(i);const c={};1&e[0]&&(c.module=t[0]),y.$set(c);const p={};if(1&e[0]&&(p.module=t[0]),L.$set(p),(!Q||1&e[0])&&lt!==(lt=t[0].state.id+"")&&T(S,lt),(!Q||1&e[0])&&ot!==(ot=t[0].state.title+"")&&N(O,ot),33&e[0]&&t[5][t[0].state.id].state.title!==H.textContent&&(H.textContent=t[5][t[0].state.id].state.title),524337&e[0]){let n;for(yt=t[0].state.inputIds,n=0;n<yt.length;n+=1){const s=Se(t,yt,n);mt[n]?mt[n].p(s,e):(mt[n]=Oe(s),mt[n].c(),mt[n].m(D,null))}for(;n<mt.length;n+=1)mt[n].d(1);mt.length=yt.length}(!Q||65&e[0]&&J!==(J="background-color: "+t[6][t[0].state.type]))&&C(f,"style",J)},i(t){Q||(Z(n.$$.fragment,t),Z(y.$$.fragment,t),Z(L.$$.fragment,t),Q=!0)},o(t){tt(n.$$.fragment,t),tt(y.$$.fragment,t),tt(L.$$.fragment,t),Q=!1},d(s){s&&g(e),it(n),it(y),it(L),$(mt,s),t[35](null),X=!1,i(K)}}}function Ae(e){let n;return{c(){n=x("None")},m(t,e){h(t,n,e)},p:t,d(t){t&&g(n)}}}function He(t){let e,n,s,i=t[0].state.inputIds[t[47]]+"",l=t[5][t[0].state.inputIds[t[47]]].state.title+"";return{c(){e=x(i),n=I(),s=x(l)},m(t,i){h(t,e,i),h(t,n,i),h(t,s,i)},p(t,n){1&n[0]&&i!==(i=t[0].state.inputIds[t[47]]+"")&&T(e,i),33&n[0]&&l!==(l=t[5][t[0].state.inputIds[t[47]]].state.title+"")&&T(s,l)},d(t){t&&g(e),t&&g(n),t&&g(s)}}}function Oe(t){let e,n,s,l,o;function a(t,e){return null!=t[0].state.inputIds[t[47]]&&t[5][t[0].state.inputIds[t[47]]]?He:Ae}let u=a(t),d=u(t);function r(){return t[32](t[47])}function p(){return t[33](t[45])}return{c(){e=b("div"),n=b("button"),d.c(),s=I(),C(n,"class","svelte-1mlbx33"),C(e,"class","inputDiv")},m(i,a){h(i,e,a),m(e,n),d.m(n,null),m(e,s),l||(o=[c(t[13].call(null,n,[t[47]])),k(n,"click",r),k(e,"mouseenter",p),k(e,"mouseleave",t[34])],l=!0)},p(e,s){u===(u=a(t=e))&&d?d.p(t,s):(d.d(1),d=u(t),d&&(d.c(),d.m(n,null)))},d(t){t&&g(e),d.d(),l=!1,i(o)}}}function Be(t){let e,n,s=!t[0].destroyed&&ze(t);return{c(){s&&s.c(),e=E()},m(t,i){s&&s.m(t,i),h(t,e,i),n=!0},p(t,n){t[0].destroyed?s&&(X(),tt(s,1,1,(()=>{s=null})),K()):s?(s.p(t,n),1&n[0]&&Z(s,1)):(s=ze(t),s.c(),Z(s,1),s.m(e.parentNode,e))},i(t){n||(Z(s),n=!0)},o(t){tt(s),n=!1},d(t){s&&s.d(t),t&&g(e)}}}function je(t,e,n){let s,i,l,o,a,c,r;u(t,mt,(t=>n(4,s=t))),u(t,ct,(t=>n(5,i=t))),u(t,vt,(t=>n(6,l=t))),u(t,ht,(t=>n(41,a=t))),u(t,ft,(t=>n(42,c=t))),u(t,pt,(t=>n(43,r=t)));let{state:p={type:"mixer",id:qt(),inputIds:[null,null,null,null],title:"Mixer"}}=e;d(ct,i[p.id]={},i);const f=i[p.id];let v,y,m;f.state=p,f.isAudio=!0,f.isControl=!1,f.state.position||(f.state.position=Bt());let h,g,$,b,w=[null,null,null,null],x={x:180,y:370};f.selectingInput=!1;var I=r.createGain();f.output=I;let E=[null,null,null,null];f.clearCurrents=()=>{n(22,E=[null,null,null,null])};let k=!1,C=!1;window.addEventListener("mouseup",(()=>{k&&(k=!1)})),window.addEventListener("mousedown",(()=>{d(ht,a=!1,a),C=!1,h&&(h.style.outline="none")}));let L=Mt(1,{stiffness:.1,damping:.5});u(t,L,(t=>n(23,o=t)));let _=Mt(0,{stiffness:.3,damping:.2});function T(t){n(0,f.inputSelecting=t,f),w[t]&&(At(f,f.state.inputIds[t]),f.selectingInput?n(0,f.selectingInput=!1,f):(n(0,f.selectingInput=!0,f),n(21,w[f.inputSelecting].style.opacity=.5,w),d(mt,s=f.state.id,s)))}f.fade=()=>{L.set(.2)},f.halfFade=()=>{L.set(.8)},f.unfade=()=>{L.set(1)},f.bob=()=>{_.set(10),setTimeout((()=>{_.set(0)}),50)},f.toggleHelp=()=>{n(0,f.showingHelp=!f.showingHelp,f),b&&(f.showingHelp?b.style.display="none":b.style.display="initial"),$&&(f.showingHelp?$.style.display="initial":$.style.display="none"),f.showingHelp?n(8,x={x:180,y:290}):n(8,x={x:180,y:370})},f.inputSelecting=null,f.select=t=>{f.selectingInput&&(n(0,f.state.inputIds[f.inputSelecting]=t,f),n(21,w[f.inputSelecting].style.opacity=1,w),n(0,f.selectingInput=!1,f)),d(mt,s=null,s),Ot()},f.bob();return t.$$set=t=>{"state"in t&&n(20,p=t.state)},t.$$.update=()=>{4194337&t.$$.dirty[0]&&f.state.inputIds.forEach(((t,e)=>{null!=t&&i[t]&&i[t].output?(E[e]&&E[e].disconnect(I),n(22,E[e]=i[t].output,E),E[e].connect(I)):(E[e]&&E[e].disconnect(I),n(22,E[e]=null,E))})),8388610&t.$$.dirty[0]&&v&&n(1,v.style.opacity=`${o}`,v),2097249&t.$$.dirty[0]&&(f.destroyed||w.forEach(((t,e)=>{null!=t&&(null!=f.state.inputIds[e]?t.style.backgroundColor=l[i[f.state.inputIds[e]].state.type]:t.style.backgroundColor="#f0f0f0")}))),28&t.$$.dirty[0]&&y&&m&&(null!=s?(n(2,y.style.pointerEvents="none",y),n(3,m.style.pointerEvents="none",m)):(n(2,y.style.pointerEvents="all",y),n(3,m.style.pointerEvents="all",m)))},[f,v,y,m,s,i,l,g,x,_,function(t){n(1,v=t),v.addEventListener("mousedown",(()=>{k=!0})),v.addEventListener("mouseup",(()=>{k&&("output"==s?c.select(f.state.id):null==s||!i[s].selectingInput||s==f.state.id||"mixer"==i[s].state.type&&i[s].state.inputIds.includes(f.state.id)&&i[s].state.inputIds[i[s].inputSelecting]!=f.state.id?s==f.state.id&&f.select(null):i[s].select(f.state.id))}))},function(t){n(2,y=t)},function(t){n(3,m=t)},function(t,e){n(21,w[e]=t,w),w[e].addEventListener("mouseenter",(()=>{null==s&&n(21,w[e].style.opacity=.8,w)})),w[e].addEventListener("mouseleave",(()=>{null==s&&n(21,w[e].style.opacity=1,w)}))},function(t){h=t,h.addEventListener("mouseenter",(()=>{h.style.outline="2px solid #222222"})),h.addEventListener("mouseleave",(()=>{C||(h.style.outline="none")})),h.addEventListener("mousedown",(()=>{setTimeout((()=>{d(ht,a=!0,a),C=!0,h.style.outline="2px solid #222222"}),10)}))},function(t){n(7,g=t)},function(t){$=t,$.style.display="none"},function(t){b=t},L,T,p,w,E,o,function(t){v=t,n(1,v),n(23,o)},function(t){y=t,n(2,y),n(3,m),n(4,s)},function(t){m=t,n(3,m),n(2,y),n(4,s)},function(t){g=t,n(7,g)},function(t){x=t,n(8,x)},function(e){t.$$.not_equal(f.state.position,e)&&(f.state.position=e,n(0,f))},function(t){_=t,n(9,_)},function(){i[f.state.id].state.title=this.textContent,ct.set(i)},t=>T(t),t=>At(f,t),()=>{null==s&&Ot()},function(t){j[t?"unshift":"push"]((()=>{f.component=t,n(0,f)}))}]}class Fe extends at{constructor(t){super(),ot(this,t,je,Be,o,{state:20},null,[-1,-1])}}function Me(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,$,w,E,_,S,z,A,H,O,B,F,M,P,D,R,G,J,W,Y,Q,X,K,lt,ot,at,ut,dt,ct,rt,pt,ft,vt,yt,mt,ht,gt,$t,bt,wt,xt,It,Et,kt,Ct,Lt,_t,Tt,Nt,qt,St,zt,At,Ht=t[1].state.id+"",Ot=t[1].state.title+"",Bt=t[7].frequency.value.toFixed(2)+"";function jt(e){t[22](e)}function Ft(e){t[23](e)}function Mt(e){t[24](e)}function Pt(e){t[25](e)}function Dt(e){t[26](e)}function Ut(e){t[27](e)}function Vt(e){t[28](e)}let Rt={};return void 0!==t[2]&&(Rt.moduleNode=t[2]),void 0!==t[3]&&(Rt.controlsNode=t[3]),void 0!==t[4]&&(Rt.deleteNode=t[4]),void 0!==t[5]&&(Rt.helpBtn=t[5]),void 0!==t[0].position&&(Rt.nodePos=t[0].position),void 0!==t[6]&&(Rt.nodeSize=t[6]),void 0!==t[8]&&(Rt.bobSize=t[8]),n=new Xt({props:Rt}),j.push((()=>et(n,"moduleNode",jt))),j.push((()=>et(n,"controlsNode",Ft))),j.push((()=>et(n,"deleteNode",Mt))),j.push((()=>et(n,"helpBtn",Pt))),j.push((()=>et(n,"nodePos",Dt))),j.push((()=>et(n,"nodeSize",Ut))),j.push((()=>et(n,"bobSize",Vt))),y=new te({props:{module:t[1]}}),E=new se({props:{module:t[1]}}),St=L(t[32][0]),{c(){e=b("main"),nt(n.$$.fragment),p=I(),f=b("div"),v=b("div"),nt(y.$$.fragment),$=I(),w=b("div"),nt(E.$$.fragment),_=I(),S=b("h1"),z=x(Ht),A=I(),H=b("div"),O=b("h2"),B=x(Ot),F=I(),M=b("div"),P=b("label"),D=x("Frequency ("),R=x(Bt),G=x("Hz)"),J=b("input"),W=I(),Y=b("br"),Q=b("section"),X=b("input"),lt=b("label"),ot=x("Sine"),ut=I(),dt=b("input"),rt=b("label"),pt=x("Triangle"),vt=I(),yt=b("input"),ht=b("label"),gt=x("Sawtooth"),bt=I(),wt=b("input"),It=b("label"),Et=x("Square"),Ct=I(),Lt=b("div"),Lt.innerHTML='<p class="svelte-19css60">Low Frequency Oscillator.<br/><br/>\n                Can be selected as a Control option on other modules to automate parameters.<br/><br/>\n                Causes the value of connected parameters to rise and fall periodically.<br/><br/>\n                Frequency parameter determines the rate at which the LFO oscillates.<br/><br/></p>',Tt=I(),Nt=b("br"),C(v,"class","delete svelte-19css60"),C(w,"class","help svelte-19css60"),C(O,"class","editableTitle svelte-19css60"),C(O,"contenteditable","true"),void 0===t[9][t[1].state.id].state.title&&U((()=>t[29].call(O))),C(P,"for","freq"),C(J,"id","freq"),C(J,"type","range"),C(J,"min","0.001"),C(J,"max","2"),C(J,"step","0.001"),C(X,"id",K="sine"+t[1].state.id),C(X,"type","radio"),X.__value="sine",X.value=X.__value,C(X,"class","svelte-19css60"),C(lt,"for",at="sine"+t[1].state.id),C(lt,"class","svelte-19css60"),C(dt,"id",ct="triangle"+t[1].state.id),C(dt,"type","radio"),dt.__value="triangle",dt.value=dt.__value,C(dt,"class","svelte-19css60"),C(rt,"for",ft="triangle"+t[1].state.id),C(rt,"class","svelte-19css60"),C(yt,"id",mt="sawtooth"+t[1].state.id),C(yt,"type","radio"),yt.__value="sawtooth",yt.value=yt.__value,C(yt,"class","svelte-19css60"),C(ht,"for",$t="sawtooth"+t[1].state.id),C(ht,"class","svelte-19css60"),C(wt,"id",xt="square"+t[1].state.id),C(wt,"type","radio"),wt.__value="square",wt.value=wt.__value,C(wt,"class","svelte-19css60"),C(It,"for",kt="square"+t[1].state.id),C(It,"class","svelte-19css60"),C(Q,"class","shape svelte-19css60"),C(H,"id","controls"),C(f,"id","module"),C(f,"style",_t="background-color: "+t[10][t[1].state.type]),C(f,"class","svelte-19css60"),St.p(X,dt,yt,wt)},m(s,i){h(s,e,i),st(n,e,null),m(e,p),m(e,f),m(f,v),st(y,v,null),m(f,$),m(f,w),st(E,w,null),m(f,_),m(f,S),m(S,z),m(f,A),m(f,H),m(H,O),m(O,B),void 0!==t[9][t[1].state.id].state.title&&(O.textContent=t[9][t[1].state.id].state.title),m(H,F),m(H,M),m(M,P),m(P,D),m(P,R),m(P,G),m(M,J),q(J,t[1].state.frequency),m(M,W),m(M,Y),m(M,Q),m(Q,X),X.checked=X.__value===t[1].state.shape,m(Q,lt),m(lt,ot),m(Q,ut),m(Q,dt),dt.checked=dt.__value===t[1].state.shape,m(Q,rt),m(rt,pt),m(Q,vt),m(Q,yt),yt.checked=yt.__value===t[1].state.shape,m(Q,ht),m(ht,gt),m(Q,bt),m(Q,wt),wt.checked=wt.__value===t[1].state.shape,m(Q,It),m(It,Et),m(f,Ct),m(f,Lt),m(e,Tt),m(e,Nt),t[36](e),qt=!0,zt||(At=[c(t[13].call(null,v)),c(t[15].call(null,w)),c(t[14].call(null,O)),k(O,"input",t[29]),k(J,"change",t[30]),k(J,"input",t[30]),k(X,"change",t[31]),k(dt,"change",t[33]),k(yt,"change",t[34]),k(wt,"change",t[35]),c(t[17].call(null,M)),c(t[12].call(null,H)),c(t[16].call(null,Lt)),c(t[11].call(null,f))],zt=!0)},p(t,e){const i={};!s&&4&e[0]&&(s=!0,i.moduleNode=t[2],V((()=>s=!1))),!l&&8&e[0]&&(l=!0,i.controlsNode=t[3],V((()=>l=!1))),!o&&16&e[0]&&(o=!0,i.deleteNode=t[4],V((()=>o=!1))),!a&&32&e[0]&&(a=!0,i.helpBtn=t[5],V((()=>a=!1))),!u&&1&e[0]&&(u=!0,i.nodePos=t[0].position,V((()=>u=!1))),!d&&64&e[0]&&(d=!0,i.nodeSize=t[6],V((()=>d=!1))),!r&&256&e[0]&&(r=!0,i.bobSize=t[8],V((()=>r=!1))),n.$set(i);const c={};2&e[0]&&(c.module=t[1]),y.$set(c);const p={};2&e[0]&&(p.module=t[1]),E.$set(p),(!qt||2&e[0])&&Ht!==(Ht=t[1].state.id+"")&&T(z,Ht),(!qt||2&e[0])&&Ot!==(Ot=t[1].state.title+"")&&N(B,Ot),514&e[0]&&t[9][t[1].state.id].state.title!==O.textContent&&(O.textContent=t[9][t[1].state.id].state.title),(!qt||128&e[0])&&Bt!==(Bt=t[7].frequency.value.toFixed(2)+"")&&T(R,Bt),2&e[0]&&q(J,t[1].state.frequency),(!qt||2&e[0]&&K!==(K="sine"+t[1].state.id))&&C(X,"id",K),2&e[0]&&(X.checked=X.__value===t[1].state.shape),(!qt||2&e[0]&&at!==(at="sine"+t[1].state.id))&&C(lt,"for",at),(!qt||2&e[0]&&ct!==(ct="triangle"+t[1].state.id))&&C(dt,"id",ct),2&e[0]&&(dt.checked=dt.__value===t[1].state.shape),(!qt||2&e[0]&&ft!==(ft="triangle"+t[1].state.id))&&C(rt,"for",ft),(!qt||2&e[0]&&mt!==(mt="sawtooth"+t[1].state.id))&&C(yt,"id",mt),2&e[0]&&(yt.checked=yt.__value===t[1].state.shape),(!qt||2&e[0]&&$t!==($t="sawtooth"+t[1].state.id))&&C(ht,"for",$t),(!qt||2&e[0]&&xt!==(xt="square"+t[1].state.id))&&C(wt,"id",xt),2&e[0]&&(wt.checked=wt.__value===t[1].state.shape),(!qt||2&e[0]&&kt!==(kt="square"+t[1].state.id))&&C(It,"for",kt),(!qt||1026&e[0]&&_t!==(_t="background-color: "+t[10][t[1].state.type]))&&C(f,"style",_t)},i(t){qt||(Z(n.$$.fragment,t),Z(y.$$.fragment,t),Z(E.$$.fragment,t),qt=!0)},o(t){tt(n.$$.fragment,t),tt(y.$$.fragment,t),tt(E.$$.fragment,t),qt=!1},d(s){s&&g(e),it(n),it(y),it(E),t[36](null),St.r(),zt=!1,i(At)}}}function Pe(t){let e,n,s=!t[1].destroyed&&Me(t);return{c(){s&&s.c(),e=E()},m(t,i){s&&s.m(t,i),h(t,e,i),n=!0},p(t,n){t[1].destroyed?s&&(X(),tt(s,1,1,(()=>{s=null})),K()):s?(s.p(t,n),2&n[0]&&Z(s,1)):(s=Me(t),s.c(),Z(s,1),s.m(e.parentNode,e))},i(t){n||(Z(s),n=!0)},o(t){tt(s),n=!1},d(t){s&&s.d(t),t&&g(e)}}}function De(t,e,n){let s,i,l,o,a,c;u(t,mt,(t=>n(20,s=t))),u(t,ht,(t=>n(42,l=t))),u(t,ct,(t=>n(9,o=t))),u(t,pt,(t=>n(43,a=t))),u(t,vt,(t=>n(10,c=t)));let{state:r={type:"lfo",frequency:1,shape:"sine",id:qt(),title:"LFO"}}=e;d(ct,o[r.id]={},o);const p=o[r.id];let f,v,y,m,h,g,$;p.state=r,p.isAudio=!1,p.isControl=!0,p.state.position||(p.state.position=Bt()),p.outputs={};let b,w={x:320,y:250},x=a.createOscillator();x.start(0),p.addOutput=(t,e)=>{n(1,p.outputs[t]=a.createGain(),p);let s=p.outputs[t];x.connect(s),s.connect(e)},p.removeOutput=(t,e)=>{let n=p.outputs[t];x.disconnect(n),n.disconnect(e),delete p.outputs[t]},p.setGain=(t,e)=>{p.outputs[t]&&p.outputs[t].gain.linearRampToValueAtTime(e,a.currentTime+.01)};let I=!1,E=!1;window.addEventListener("mouseup",(()=>{I&&(I=!1)})),window.addEventListener("mousedown",(()=>{d(ht,l=!1,l),E=!1,m&&(m.style.outline="none")}));let k=Mt(1,{stiffness:.1,damping:.5});u(t,k,(t=>n(21,i=t)));let C=Mt(0,{stiffness:.3,damping:.2});p.fade=()=>{k.set(.2)},p.halfFade=()=>{k.set(.8)},p.unfade=()=>{k.set(1)},p.bob=()=>{C.set(10),setTimeout((()=>{C.set(0)}),50)},p.toggleHelp=()=>{n(1,p.showingHelp=!p.showingHelp,p),$&&(p.showingHelp?$.style.display="none":$.style.display="initial"),g&&(p.showingHelp?g.style.display="initial":g.style.display="none"),p.showingHelp?n(6,w={x:320,y:400}):n(6,w={x:320,y:250})},p.bob();return t.$$set=t=>{"state"in t&&n(0,r=t.state)},t.$$.update=()=>{2&t.$$.dirty[0]&&n(19,b=Math.pow(20,p.state.frequency-1)),524288&t.$$.dirty[0]&&n(7,x.frequency.value=b,x),2&t.$$.dirty[0]&&n(7,x.type=p.state.shape,x),2097156&t.$$.dirty[0]&&f&&n(2,f.style.opacity=`${i}`,f),1048600&t.$$.dirty[0]&&v&&y&&(null!=s?(n(3,v.style.pointerEvents="none",v),n(4,y.style.pointerEvents="none",y)):(n(3,v.style.pointerEvents="all",v),n(4,y.style.pointerEvents="all",y)))},[r,p,f,v,y,h,w,x,C,o,c,function(t){n(2,f=t),f.addEventListener("mousedown",(()=>{I=!0})),f.addEventListener("mouseup",(()=>{I&&null!=s&&o[s].selectingCv&&o[s].select(p.state.id)}))},function(t){n(3,v=t)},function(t){n(4,y=t)},function(t){m=t,m.addEventListener("mouseenter",(()=>{m.style.outline="2px solid #222222"})),m.addEventListener("mouseleave",(()=>{E||(m.style.outline="none")})),m.addEventListener("mousedown",(()=>{setTimeout((()=>{d(ht,l=!0,l),E=!0,m.style.outline="2px solid #222222"}),10)}))},function(t){n(5,h=t)},function(t){g=t,g.style.display="none"},function(t){$=t},k,b,s,i,function(t){f=t,n(2,f),n(21,i)},function(t){v=t,n(3,v),n(4,y),n(20,s)},function(t){y=t,n(4,y),n(3,v),n(20,s)},function(t){h=t,n(5,h)},function(e){t.$$.not_equal(r.position,e)&&(r.position=e,n(0,r))},function(t){w=t,n(6,w)},function(t){C=t,n(8,C)},function(){o[p.state.id].state.title=this.textContent,ct.set(o)},function(){p.state.frequency=_(this.value),n(1,p)},function(){p.state.shape=this.__value,n(1,p)},[[]],function(){p.state.shape=this.__value,n(1,p)},function(){p.state.shape=this.__value,n(1,p)},function(){p.state.shape=this.__value,n(1,p)},function(t){j[t?"unshift":"push"]((()=>{p.component=t,n(1,p)}))}]}class Ue extends at{constructor(t){super(),ot(this,t,De,Pe,o,{state:0},null,[-1,-1])}}function Ve(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,$,w,E,L,_,S,z,A,H,O,B,F,M,P,D,R,G,J,W,Y,Q,X,K,lt,ot,at,ut,dt,ct,rt,pt,ft=t[4].state.id+"",vt=t[4].state.title+"",yt=t[4].state.delayTime.toFixed(2)+"";function mt(e){t[25](e)}function ht(e){t[26](e)}function gt(e){t[27](e)}function $t(e){t[28](e)}function bt(e){t[29](e)}function wt(e){t[30](e)}function xt(e){t[31](e)}let It={};function Et(t,e){return null!=t[4].state.inputId&&t[6][t[4].state.inputId]?Ge:Re}void 0!==t[1]&&(It.moduleNode=t[1]),void 0!==t[2]&&(It.controlsNode=t[2]),void 0!==t[3]&&(It.deleteNode=t[3]),void 0!==t[8]&&(It.helpBtn=t[8]),void 0!==t[9]&&(It.nodeSize=t[9]),void 0!==t[0].position&&(It.nodePos=t[0].position),void 0!==t[10]&&(It.bobSize=t[10]),n=new Xt({props:It}),j.push((()=>et(n,"moduleNode",mt))),j.push((()=>et(n,"controlsNode",ht))),j.push((()=>et(n,"deleteNode",gt))),j.push((()=>et(n,"helpBtn",$t))),j.push((()=>et(n,"nodeSize",bt))),j.push((()=>et(n,"nodePos",wt))),j.push((()=>et(n,"bobSize",xt))),y=new te({props:{module:t[4]}}),E=new se({props:{module:t[4]}});let kt=Et(t),Ct=kt(t);return{c(){e=b("main"),nt(n.$$.fragment),p=I(),f=b("div"),v=b("div"),nt(y.$$.fragment),$=I(),w=b("div"),nt(E.$$.fragment),L=I(),_=b("h1"),S=x(ft),z=I(),A=b("div"),H=b("h2"),O=x(vt),B=I(),F=b("div"),M=b("div"),P=b("label"),D=b("button"),Ct.c(),R=x(" Input"),G=b("br"),J=I(),W=b("label"),Y=x("Delay Time ("),Q=x(yt),X=x("s)"),K=b("input"),lt=I(),ot=b("div"),ot.innerHTML='<p class="svelte-1yeu6yr">Causes the input signal to repeat, with each repetition gradually lowering in volume.<br/><br/>\n            Delay Time parameter controls the time between each repetition.</p>',ut=I(),dt=b("br"),C(v,"class","delete svelte-1yeu6yr"),C(w,"class","help svelte-1yeu6yr"),C(H,"class","editableTitle svelte-1yeu6yr"),C(H,"contenteditable","true"),void 0===t[6][t[4].state.id].state.title&&U((()=>t[32].call(H))),C(D,"class","svelte-1yeu6yr"),C(M,"class","inputDiv"),C(W,"for","delayTime"),C(K,"id","delayTime"),C(K,"type","range"),C(K,"min","0.01"),C(K,"max","1"),C(K,"step","0.001"),C(A,"id","controls"),C(f,"id","module"),C(f,"style",at="background-color: "+t[7][t[4].state.type]),C(f,"class","svelte-1yeu6yr")},m(s,i){h(s,e,i),st(n,e,null),m(e,p),m(e,f),m(f,v),st(y,v,null),m(f,$),m(f,w),st(E,w,null),m(f,L),m(f,_),m(_,S),m(f,z),m(f,A),m(A,H),m(H,O),void 0!==t[6][t[4].state.id].state.title&&(H.textContent=t[6][t[4].state.id].state.title),m(A,B),m(A,F),m(F,M),m(M,P),m(P,D),Ct.m(D,null),m(P,R),m(F,G),m(F,J),m(F,W),m(W,Y),m(W,Q),m(W,X),m(F,K),q(K,t[4].state.delayTime),m(f,lt),m(f,ot),m(e,ut),m(e,dt),t[36](e),ct=!0,rt||(pt=[c(t[13].call(null,v)),c(t[16].call(null,w)),c(t[15].call(null,H)),k(H,"input",t[32]),c(t[14].call(null,D)),k(D,"click",t[20]),k(M,"mouseenter",t[33]),k(M,"mouseleave",t[34]),k(K,"change",t[35]),k(K,"input",t[35]),c(t[17].call(null,F)),c(t[12].call(null,A)),c(t[18].call(null,ot)),c(t[11].call(null,f))],rt=!0)},p(t,e){const i={};!s&&2&e[0]&&(s=!0,i.moduleNode=t[1],V((()=>s=!1))),!l&&4&e[0]&&(l=!0,i.controlsNode=t[2],V((()=>l=!1))),!o&&8&e[0]&&(o=!0,i.deleteNode=t[3],V((()=>o=!1))),!a&&256&e[0]&&(a=!0,i.helpBtn=t[8],V((()=>a=!1))),!u&&512&e[0]&&(u=!0,i.nodeSize=t[9],V((()=>u=!1))),!d&&1&e[0]&&(d=!0,i.nodePos=t[0].position,V((()=>d=!1))),!r&&1024&e[0]&&(r=!0,i.bobSize=t[10],V((()=>r=!1))),n.$set(i);const c={};16&e[0]&&(c.module=t[4]),y.$set(c);const p={};16&e[0]&&(p.module=t[4]),E.$set(p),(!ct||16&e[0])&&ft!==(ft=t[4].state.id+"")&&T(S,ft),(!ct||16&e[0])&&vt!==(vt=t[4].state.title+"")&&N(O,vt),80&e[0]&&t[6][t[4].state.id].state.title!==H.textContent&&(H.textContent=t[6][t[4].state.id].state.title),kt===(kt=Et(t))&&Ct?Ct.p(t,e):(Ct.d(1),Ct=kt(t),Ct&&(Ct.c(),Ct.m(D,null))),(!ct||16&e[0])&&yt!==(yt=t[4].state.delayTime.toFixed(2)+"")&&T(Q,yt),16&e[0]&&q(K,t[4].state.delayTime),(!ct||144&e[0]&&at!==(at="background-color: "+t[7][t[4].state.type]))&&C(f,"style",at)},i(t){ct||(Z(n.$$.fragment,t),Z(y.$$.fragment,t),Z(E.$$.fragment,t),ct=!0)},o(t){tt(n.$$.fragment,t),tt(y.$$.fragment,t),tt(E.$$.fragment,t),ct=!1},d(s){s&&g(e),it(n),it(y),it(E),Ct.d(),t[36](null),rt=!1,i(pt)}}}function Re(e){let n;return{c(){n=x("None")},m(t,e){h(t,n,e)},p:t,d(t){t&&g(n)}}}function Ge(t){let e,n,s,i=t[4].state.inputId+"",l=t[6][t[4].state.inputId].state.title+"";return{c(){e=x(i),n=I(),s=x(l)},m(t,i){h(t,e,i),h(t,n,i),h(t,s,i)},p(t,n){16&n[0]&&i!==(i=t[4].state.inputId+"")&&T(e,i),80&n[0]&&l!==(l=t[6][t[4].state.inputId].state.title+"")&&T(s,l)},d(t){t&&g(e),t&&g(n),t&&g(s)}}}function Je(t){let e,n,s=!t[4].destroyed&&Ve(t);return{c(){s&&s.c(),e=E()},m(t,i){s&&s.m(t,i),h(t,e,i),n=!0},p(t,n){t[4].destroyed?s&&(X(),tt(s,1,1,(()=>{s=null})),K()):s?(s.p(t,n),16&n[0]&&Z(s,1)):(s=Ve(t),s.c(),Z(s,1),s.m(e.parentNode,e))},i(t){n||(Z(s),n=!0)},o(t){tt(s),n=!1},d(t){s&&s.d(t),t&&g(e)}}}function We(t,e,n){let s,i,l,o,a,c,r;u(t,mt,(t=>n(5,s=t))),u(t,ct,(t=>n(6,i=t))),u(t,vt,(t=>n(7,l=t))),u(t,ht,(t=>n(42,a=t))),u(t,ft,(t=>n(43,c=t))),u(t,pt,(t=>n(24,r=t)));let p,f,v,y,m,h,g,$,{state:b={type:"delay",id:qt(),title:"Delay",inputId:null,delayTime:.5}}=e,w={x:280,y:265};d(ct,i[b.id]={},i);const x=i[b.id];x.state=b,x.isAudio=!0,x.isControl=!1,x.showingHelp=!1,x.state.position||(x.state.position=Bt());let I=r.createGain(),E=[],k=[];for(let t=0;t<10;t++){let t=r.createDelay(20),e=r.createGain();t.connect(e),e.connect(I),E.push(t),k.push(e)}x.output=I;for(let t=0;t<10;t++)k[t].gain.setValueAtTime(1-(t+1)/10,r.currentTime);var C;x.clearCurrents=()=>{n(22,C=null)};let L=!1,T=!1;window.addEventListener("mouseup",(()=>{L&&(L=!1)})),window.addEventListener("mousedown",(()=>{d(ht,a=!1,a),T=!1,y&&(y.style.outline="none")}));let N=Mt(1,{stiffness:.1,damping:.5});u(t,N,(t=>n(23,o=t)));let q=Mt(0,{stiffness:.3,damping:.2});x.fade=()=>{N.set(.2)},x.halfFade=()=>{N.set(.8)},x.unfade=()=>{N.set(1)},x.bob=()=>{q.set(10),setTimeout((()=>{q.set(0)}),50)},x.toggleHelp=()=>{n(4,x.showingHelp=!x.showingHelp,x),g&&(x.showingHelp?g.style.display="none":g.style.display="initial"),$&&(x.showingHelp?$.style.display="initial":$.style.display="none"),x.showingHelp?n(9,w={x:280,y:310}):n(9,w={x:280,y:265})},x.select=t=>{x.selectingInput&&(n(4,x.state.inputId=t,x),n(21,m.style.opacity=1,m),n(4,x.selectingInput=!1,x)),d(mt,s=null,s),Ot()},x.bob();return t.$$set=t=>{"state"in t&&n(0,b=t.state)},t.$$.update=()=>{if(16777232&t.$$.dirty[0])for(let t=0;t<10;t++)E[t].delayTime.setValueAtTime(x.state.delayTime*t,r.currentTime);4194384&t.$$.dirty[0]&&(x.destroyed||(null!=x.state.inputId&&i[x.state.inputId]&&i[x.state.inputId].output?(C&&E.forEach((t=>{C.disconnect(t)})),n(22,C=i[x.state.inputId].output),E.forEach((t=>{C.connect(t)})),(i[x.state.inputId].input||i[x.state.inputId].inputs)&&i[x.state.inputId].update()):(C&&E.forEach((t=>{C.disconnect(t)})),n(22,C=null)))),8388610&t.$$.dirty[0]&&p&&n(1,p.style.opacity=`${o}`,p),2097360&t.$$.dirty[0]&&(x.destroyed||m&&(null!=x.state.inputId?n(21,m.style.backgroundColor=l[i[x.state.inputId].state.type],m):n(21,m.style.backgroundColor="#f0f0f0",m))),44&t.$$.dirty[0]&&f&&v&&(null!=s?(n(2,f.style.pointerEvents="none",f),n(3,v.style.pointerEvents="none",v)):(n(2,f.style.pointerEvents="all",f),n(3,v.style.pointerEvents="all",v)))},[b,p,f,v,x,s,i,l,h,w,q,function(t){n(1,p=t),p.addEventListener("mousedown",(()=>{L=!0})),p.addEventListener("mouseup",(()=>{L&&("output"==s?c.select(x.state.id):null==s||!i[s].selectingInput||s==x.state.id||"mixer"==i[s].state.type&&i[s].state.inputIds.includes(x.state.id)&&i[s].state.inputIds[i[s].inputSelecting]!=x.state.id?s==x.state.id&&x.select(null):i[s].select(x.state.id))}))},function(t){n(2,f=t)},function(t){n(3,v=t)},function(t){n(21,m=t),m.addEventListener("mouseenter",(()=>{null==s&&n(21,m.style.opacity=.8,m)})),m.addEventListener("mouseleave",(()=>{null==s&&n(21,m.style.opacity=1,m)}))},function(t){y=t,y.addEventListener("mouseenter",(()=>{y.style.outline="2px solid #222222"})),y.addEventListener("mouseleave",(()=>{T||(y.style.outline="none")})),y.addEventListener("mousedown",(()=>{setTimeout((()=>{d(ht,a=!0,a),T=!0,y.style.outline="2px solid #222222"}),10)}))},function(t){n(8,h=t)},function(t){g=t},function(t){$=t,$.style.display="none"},N,function(){zt(x),m&&(x.selectingInput?n(4,x.selectingInput=!1,x):(n(4,x.selectingInput=!0,x),n(21,m.style.opacity=.5,m),d(mt,s=x.state.id,s)))},m,C,o,r,function(t){p=t,n(1,p),n(23,o)},function(t){f=t,n(2,f),n(3,v),n(5,s)},function(t){v=t,n(3,v),n(2,f),n(5,s)},function(t){h=t,n(8,h)},function(t){w=t,n(9,w)},function(e){t.$$.not_equal(b.position,e)&&(b.position=e,n(0,b))},function(t){q=t,n(10,q)},function(){i[x.state.id].state.title=this.textContent,ct.set(i)},()=>zt(x),()=>{null==s&&Ot()},function(){x.state.delayTime=_(this.value),n(4,x)},function(t){j[t?"unshift":"push"]((()=>{x.component=t,n(4,x)}))}]}class Ye extends at{constructor(t){super(),ot(this,t,We,Je,o,{state:0},null,[-1,-1])}}function Qe(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,$,w,E,L,_,q,S,z,A,H,O,B,F,M,P,D,R,G,J,W,Y=t[6].state.id+"",Q=t[6].state.title+"";function X(e){t[20](e)}function K(e){t[21](e)}function lt(e){t[22](e)}function ot(e){t[23](e)}function at(e){t[24](e)}function ut(e){t[25](e)}function dt(e){t[26](e)}let ct={};return void 0!==t[1]&&(ct.moduleNode=t[1]),void 0!==t[2]&&(ct.controlsNode=t[2]),void 0!==t[3]&&(ct.deleteNode=t[3]),void 0!==t[4]&&(ct.helpBtn=t[4]),void 0!==t[5]&&(ct.nodeSize=t[5]),void 0!==t[0].position&&(ct.nodePos=t[0].position),void 0!==t[7]&&(ct.bobSize=t[7]),n=new Xt({props:ct}),j.push((()=>et(n,"moduleNode",X))),j.push((()=>et(n,"controlsNode",K))),j.push((()=>et(n,"deleteNode",lt))),j.push((()=>et(n,"helpBtn",ot))),j.push((()=>et(n,"nodeSize",at))),j.push((()=>et(n,"nodePos",ut))),j.push((()=>et(n,"bobSize",dt))),y=new te({props:{module:t[6]}}),E=new se({props:{module:t[6]}}),{c(){e=b("main"),nt(n.$$.fragment),p=I(),f=b("div"),v=b("div"),nt(y.$$.fragment),$=I(),w=b("div"),nt(E.$$.fragment),L=I(),_=b("h1"),q=x(Y),S=I(),z=b("div"),A=b("h2"),H=x(Q),O=I(),B=b("div"),F=I(),M=b("div"),M.innerHTML='<p class="svelte-1gia3or">Produces a constant white noise signal.</p>',D=I(),R=b("br"),C(v,"class","delete svelte-1gia3or"),C(w,"class","help svelte-1gia3or"),C(A,"class","editableTitle svelte-1gia3or"),C(A,"contenteditable","true"),void 0===t[8][t[6].state.id].state.title&&U((()=>t[27].call(A))),C(z,"id","controls"),C(f,"id","module"),C(f,"style",P="background-color: "+t[9][t[6].state.type]),C(f,"class","svelte-1gia3or")},m(s,i){h(s,e,i),st(n,e,null),m(e,p),m(e,f),m(f,v),st(y,v,null),m(f,$),m(f,w),st(E,w,null),m(f,L),m(f,_),m(_,q),m(f,S),m(f,z),m(z,A),m(A,H),void 0!==t[8][t[6].state.id].state.title&&(A.textContent=t[8][t[6].state.id].state.title),m(z,O),m(z,B),m(f,F),m(f,M),m(e,D),m(e,R),t[28](e),G=!0,J||(W=[c(t[12].call(null,v)),c(t[14].call(null,w)),c(t[13].call(null,A)),k(A,"input",t[27]),c(t[15].call(null,B)),c(t[11].call(null,z)),c(t[16].call(null,M)),c(t[10].call(null,f))],J=!0)},p(t,e){const i={};!s&&2&e[0]&&(s=!0,i.moduleNode=t[1],V((()=>s=!1))),!l&&4&e[0]&&(l=!0,i.controlsNode=t[2],V((()=>l=!1))),!o&&8&e[0]&&(o=!0,i.deleteNode=t[3],V((()=>o=!1))),!a&&16&e[0]&&(a=!0,i.helpBtn=t[4],V((()=>a=!1))),!u&&32&e[0]&&(u=!0,i.nodeSize=t[5],V((()=>u=!1))),!d&&1&e[0]&&(d=!0,i.nodePos=t[0].position,V((()=>d=!1))),!r&&128&e[0]&&(r=!0,i.bobSize=t[7],V((()=>r=!1))),n.$set(i);const c={};64&e[0]&&(c.module=t[6]),y.$set(c);const p={};64&e[0]&&(p.module=t[6]),E.$set(p),(!G||64&e[0])&&Y!==(Y=t[6].state.id+"")&&T(q,Y),(!G||64&e[0])&&Q!==(Q=t[6].state.title+"")&&N(H,Q),320&e[0]&&t[8][t[6].state.id].state.title!==A.textContent&&(A.textContent=t[8][t[6].state.id].state.title),(!G||576&e[0]&&P!==(P="background-color: "+t[9][t[6].state.type]))&&C(f,"style",P)},i(t){G||(Z(n.$$.fragment,t),Z(y.$$.fragment,t),Z(E.$$.fragment,t),G=!0)},o(t){tt(n.$$.fragment,t),tt(y.$$.fragment,t),tt(E.$$.fragment,t),G=!1},d(s){s&&g(e),it(n),it(y),it(E),t[28](null),J=!1,i(W)}}}function Xe(t){let e,n,s=!t[6].destroyed&&Qe(t);return{c(){s&&s.c(),e=E()},m(t,i){s&&s.m(t,i),h(t,e,i),n=!0},p(t,n){t[6].destroyed?s&&(X(),tt(s,1,1,(()=>{s=null})),K()):s?(s.p(t,n),64&n[0]&&Z(s,1)):(s=Qe(t),s.c(),Z(s,1),s.m(e.parentNode,e))},i(t){n||(Z(s),n=!0)},o(t){tt(s),n=!1},d(t){s&&s.d(t),t&&g(e)}}}function Ke(t,e,n){let s,i,l,o,a,c,r;u(t,mt,(t=>n(18,s=t))),u(t,ht,(t=>n(36,l=t))),u(t,ct,(t=>n(8,o=t))),u(t,ft,(t=>n(37,a=t))),u(t,pt,(t=>n(38,c=t))),u(t,vt,(t=>n(9,r=t)));let p,f,v,y,m,h,g,{state:$={type:"noise",id:qt(),title:"Noise"}}=e,b={x:200,y:150};d(ct,o[$.id]={},o);const w=o[$.id];w.state=$,w.isAudio=!0,w.isControl=!1,w.showingHelp=!1,w.state.position||(w.state.position=Bt());let x=2*c.sampleRate,I=c.createBuffer(1,x,c.sampleRate),E=I.getChannelData(0);for(let t=0;t<x;t++)E[t]=2*Math.random()-1;let k=c.createBufferSource();k.buffer=I,k.loop=!0,k.start(0),w.output=k,w.clearCurrents=()=>{};let C=!1,L=!1;window.addEventListener("mouseup",(()=>{C&&(C=!1)})),window.addEventListener("mousedown",(()=>{d(ht,l=!1,l),L=!1,y&&(y.style.outline="none")}));let _=Mt(1,{stiffness:.1,damping:.5});u(t,_,(t=>n(19,i=t)));let T=Mt(0,{stiffness:.3,damping:.2});return w.fade=()=>{_.set(.2)},w.halfFade=()=>{_.set(.8)},w.unfade=()=>{_.set(1)},w.bob=()=>{T.set(10),setTimeout((()=>{T.set(0)}),50)},w.toggleHelp=()=>{n(6,w.showingHelp=!w.showingHelp,w),h&&(w.showingHelp?h.style.display="none":h.style.display="initial"),g&&(w.showingHelp?g.style.display="initial":g.style.display="none"),w.showingHelp?n(5,b={x:200,y:220}):n(5,b={x:200,y:150})},w.bob(),t.$$set=t=>{"state"in t&&n(0,$=t.state)},t.$$.update=()=>{524290&t.$$.dirty[0]&&p&&n(1,p.style.opacity=`${i}`,p),262156&t.$$.dirty[0]&&f&&v&&(null!=s?(n(2,f.style.pointerEvents="none",f),n(3,v.style.pointerEvents="none",v)):(n(2,f.style.pointerEvents="all",f),n(3,v.style.pointerEvents="all",v)))},[$,p,f,v,m,b,w,T,o,r,function(t){n(1,p=t),p.addEventListener("mousedown",(()=>{C=!0})),p.addEventListener("mouseup",(()=>{C&&("output"==s?a.select(w.state.id):null==s||!o[s].selectingInput||s==w.state.id||"mixer"==o[s].state.type&&o[s].state.inputIds.includes(w.state.id)&&o[s].state.inputIds[o[s].inputSelecting]!=w.state.id?s==w.state.id&&w.select(null):o[s].select(w.state.id))}))},function(t){n(2,f=t)},function(t){n(3,v=t)},function(t){y=t,y.addEventListener("mouseenter",(()=>{y.style.outline="2px solid #222222"})),y.addEventListener("mouseleave",(()=>{L||(y.style.outline="none")})),y.addEventListener("mousedown",(()=>{setTimeout((()=>{d(ht,l=!0,l),L=!0,y.style.outline="2px solid #222222"}),10)}))},function(t){n(4,m=t)},function(t){h=t},function(t){g=t,g.style.display="none"},_,s,i,function(t){p=t,n(1,p),n(19,i)},function(t){f=t,n(2,f),n(3,v),n(18,s)},function(t){v=t,n(3,v),n(2,f),n(18,s)},function(t){m=t,n(4,m)},function(t){b=t,n(5,b)},function(e){t.$$.not_equal($.position,e)&&($.position=e,n(0,$))},function(t){T=t,n(7,T)},function(){o[w.state.id].state.title=this.textContent,ct.set(o)},function(t){j[t?"unshift":"push"]((()=>{w.component=t,n(6,w)}))}]}class Ze extends at{constructor(t){super(),ot(this,t,Ke,Xe,o,{state:0},null,[-1,-1])}}function tn(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,$,w,E,L,_,q,S,z,A,H,O,B,F,M,P,D,R,G,J,W,Y=t[6].state.id+"",Q=t[6].state.title+"";function X(e){t[20](e)}function K(e){t[21](e)}function lt(e){t[22](e)}function ot(e){t[23](e)}function at(e){t[24](e)}function ut(e){t[25](e)}function dt(e){t[26](e)}let ct={};return void 0!==t[1]&&(ct.moduleNode=t[1]),void 0!==t[2]&&(ct.controlsNode=t[2]),void 0!==t[3]&&(ct.deleteNode=t[3]),void 0!==t[4]&&(ct.helpBtn=t[4]),void 0!==t[5]&&(ct.nodeSize=t[5]),void 0!==t[0].position&&(ct.nodePos=t[0].position),void 0!==t[7]&&(ct.bobSize=t[7]),n=new Xt({props:ct}),j.push((()=>et(n,"moduleNode",X))),j.push((()=>et(n,"controlsNode",K))),j.push((()=>et(n,"deleteNode",lt))),j.push((()=>et(n,"helpBtn",ot))),j.push((()=>et(n,"nodeSize",at))),j.push((()=>et(n,"nodePos",ut))),j.push((()=>et(n,"bobSize",dt))),y=new te({props:{module:t[6]}}),E=new se({props:{module:t[6]}}),{c(){e=b("main"),nt(n.$$.fragment),p=I(),f=b("div"),v=b("div"),nt(y.$$.fragment),$=I(),w=b("div"),nt(E.$$.fragment),L=I(),_=b("h1"),q=x(Y),S=I(),z=b("div"),A=b("h2"),H=x(Q),O=I(),B=b("div"),F=I(),M=b("div"),M.innerHTML='<p class="svelte-2v84ug">Produces the audio being captured by the user&#39;s input device (e.g. microphone) if permission is given.</p>',D=I(),R=b("br"),C(v,"class","delete svelte-2v84ug"),C(w,"class","help svelte-2v84ug"),C(A,"class","editableTitle svelte-2v84ug"),C(A,"contenteditable","true"),void 0===t[8][t[6].state.id].state.title&&U((()=>t[27].call(A))),C(z,"id","controls"),C(f,"id","module"),C(f,"style",P="background-color: "+t[9][t[6].state.type]),C(f,"class","svelte-2v84ug")},m(s,i){h(s,e,i),st(n,e,null),m(e,p),m(e,f),m(f,v),st(y,v,null),m(f,$),m(f,w),st(E,w,null),m(f,L),m(f,_),m(_,q),m(f,S),m(f,z),m(z,A),m(A,H),void 0!==t[8][t[6].state.id].state.title&&(A.textContent=t[8][t[6].state.id].state.title),m(z,O),m(z,B),m(f,F),m(f,M),m(e,D),m(e,R),t[28](e),G=!0,J||(W=[c(t[12].call(null,v)),c(t[14].call(null,w)),c(t[13].call(null,A)),k(A,"input",t[27]),c(t[15].call(null,B)),c(t[11].call(null,z)),c(t[16].call(null,M)),c(t[10].call(null,f))],J=!0)},p(t,e){const i={};!s&&2&e[0]&&(s=!0,i.moduleNode=t[1],V((()=>s=!1))),!l&&4&e[0]&&(l=!0,i.controlsNode=t[2],V((()=>l=!1))),!o&&8&e[0]&&(o=!0,i.deleteNode=t[3],V((()=>o=!1))),!a&&16&e[0]&&(a=!0,i.helpBtn=t[4],V((()=>a=!1))),!u&&32&e[0]&&(u=!0,i.nodeSize=t[5],V((()=>u=!1))),!d&&1&e[0]&&(d=!0,i.nodePos=t[0].position,V((()=>d=!1))),!r&&128&e[0]&&(r=!0,i.bobSize=t[7],V((()=>r=!1))),n.$set(i);const c={};64&e[0]&&(c.module=t[6]),y.$set(c);const p={};64&e[0]&&(p.module=t[6]),E.$set(p),(!G||64&e[0])&&Y!==(Y=t[6].state.id+"")&&T(q,Y),(!G||64&e[0])&&Q!==(Q=t[6].state.title+"")&&N(H,Q),320&e[0]&&t[8][t[6].state.id].state.title!==A.textContent&&(A.textContent=t[8][t[6].state.id].state.title),(!G||576&e[0]&&P!==(P="background-color: "+t[9][t[6].state.type]))&&C(f,"style",P)},i(t){G||(Z(n.$$.fragment,t),Z(y.$$.fragment,t),Z(E.$$.fragment,t),G=!0)},o(t){tt(n.$$.fragment,t),tt(y.$$.fragment,t),tt(E.$$.fragment,t),G=!1},d(s){s&&g(e),it(n),it(y),it(E),t[28](null),J=!1,i(W)}}}function en(t){let e,n,s=!t[6].destroyed&&tn(t);return{c(){s&&s.c(),e=E()},m(t,i){s&&s.m(t,i),h(t,e,i),n=!0},p(t,n){t[6].destroyed?s&&(X(),tt(s,1,1,(()=>{s=null})),K()):s?(s.p(t,n),64&n[0]&&Z(s,1)):(s=tn(t),s.c(),Z(s,1),s.m(e.parentNode,e))},i(t){n||(Z(s),n=!0)},o(t){tt(s),n=!1},d(t){s&&s.d(t),t&&g(e)}}}function nn(t,e,n){let s,i,l,o,a,c,r;u(t,mt,(t=>n(18,s=t))),u(t,ht,(t=>n(34,l=t))),u(t,ct,(t=>n(8,o=t))),u(t,ft,(t=>n(35,a=t))),u(t,pt,(t=>n(36,c=t))),u(t,vt,(t=>n(9,r=t)));let p,f,v,y,m,h,g,{state:$={type:"input",id:qt(),title:"Audio Input"}}=e,b={x:280,y:150};d(ct,o[$.id]={},o);const w=o[$.id];w.state=$,w.isAudio=!0,w.isControl=!1,w.showingHelp=!1,w.state.position||(w.state.position=Bt()),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1},video:!1}).then((t=>{let e=c.createMediaStreamSource(t);n(6,w.output=e,w)})),w.clearCurrents=()=>{};let x=!1,I=!1;window.addEventListener("mouseup",(()=>{x&&(x=!1)})),window.addEventListener("mousedown",(()=>{d(ht,l=!1,l),I=!1,y&&(y.style.outline="none")}));let E=Mt(1,{stiffness:.1,damping:.5});u(t,E,(t=>n(19,i=t)));let k=Mt(0,{stiffness:.3,damping:.2});return w.fade=()=>{E.set(.2)},w.halfFade=()=>{E.set(.8)},w.unfade=()=>{E.set(1)},w.bob=()=>{k.set(10),setTimeout((()=>{k.set(0)}),50)},w.toggleHelp=()=>{n(6,w.showingHelp=!w.showingHelp,w),h&&(w.showingHelp?h.style.display="none":h.style.display="initial"),g&&(w.showingHelp?g.style.display="initial":g.style.display="none"),w.showingHelp?n(5,b={x:280,y:255}):n(5,b={x:280,y:150})},w.bob(),t.$$set=t=>{"state"in t&&n(0,$=t.state)},t.$$.update=()=>{524290&t.$$.dirty[0]&&p&&n(1,p.style.opacity=`${i}`,p),262156&t.$$.dirty[0]&&f&&v&&(null!=s?(n(2,f.style.pointerEvents="none",f),n(3,v.style.pointerEvents="none",v)):(n(2,f.style.pointerEvents="all",f),n(3,v.style.pointerEvents="all",v)))},[$,p,f,v,m,b,w,k,o,r,function(t){n(1,p=t),p.addEventListener("mousedown",(()=>{x=!0})),p.addEventListener("mouseup",(()=>{x&&("output"==s?a.select(w.state.id):null==s||!o[s].selectingInput||s==w.state.id||"mixer"==o[s].state.type&&o[s].state.inputIds.includes(w.state.id)&&o[s].state.inputIds[o[s].inputSelecting]!=w.state.id?s==w.state.id&&w.select(null):o[s].select(w.state.id))}))},function(t){n(2,f=t)},function(t){n(3,v=t)},function(t){y=t,y.addEventListener("mouseenter",(()=>{y.style.outline="2px solid #222222"})),y.addEventListener("mouseleave",(()=>{I||(y.style.outline="none")})),y.addEventListener("mousedown",(()=>{setTimeout((()=>{d(ht,l=!0,l),I=!0,y.style.outline="2px solid #222222"}),10)}))},function(t){n(4,m=t)},function(t){h=t},function(t){g=t,g.style.display="none"},E,s,i,function(t){p=t,n(1,p),n(19,i)},function(t){f=t,n(2,f),n(3,v),n(18,s)},function(t){v=t,n(3,v),n(2,f),n(18,s)},function(t){m=t,n(4,m)},function(t){b=t,n(5,b)},function(e){t.$$.not_equal($.position,e)&&($.position=e,n(0,$))},function(t){k=t,n(7,k)},function(){o[w.state.id].state.title=this.textContent,ct.set(o)},function(t){j[t?"unshift":"push"]((()=>{w.component=t,n(6,w)}))}]}class sn extends at{constructor(t){super(),ot(this,t,nn,en,o,{state:0},null,[-1,-1])}}function ln(t,e,n){const s=t.slice();return s[26]=e[n],s}function on(e){let n;return{c(){n=b("h2"),n.textContent="Mobile not yet supported"},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&g(n)}}}function an(t){let e,n,s,l,o,a,u,d,r,p,f,v,y,w,x,E,L,_,T,N,q,S,z,A,H,O,B,j,F,M,P,D,U,V,R,G,J,W,Y,Q,et,lt,ot,at,ut,dt,ct,rt,pt,ft;ot=new _t({}),ut=new Yt({});let vt=t[0],yt=[];for(let e=0;e<vt.length;e+=1)yt[e]=un(ln(t,vt,e));const mt=t=>tt(yt[t],1,1,(()=>{yt[t]=null}));return{c(){e=b("div"),n=b("div"),s=b("button"),s.textContent="Save Patch",l=I(),o=b("button"),o.textContent="Load Patch",a=I(),u=b("button"),u.textContent="Add Oscillator",d=I(),r=b("button"),r.textContent="Add Amplifier",p=I(),f=b("button"),f.textContent="Add Filter",v=I(),y=b("button"),y.textContent="Add Mixer",w=I(),x=b("button"),x.textContent="Add Envelope",E=I(),L=b("button"),L.textContent="Add LFO",_=I(),T=b("button"),T.textContent="Add Delay",N=I(),q=b("button"),q.textContent="Add Noise",S=I(),z=b("button"),z.textContent="Add Audio Input",A=I(),H=b("button"),H.textContent="Clear Patch",O=I(),B=b("div"),j=b("button"),j.textContent="Demo 1",F=b("br"),M=I(),P=b("button"),P.textContent="Demo 2",D=b("br"),U=I(),V=b("button"),V.textContent="Demo 3",R=b("br"),G=I(),J=b("button"),J.textContent="Demo 4",W=b("br"),Y=I(),Q=b("button"),Q.textContent="Demo 5",et=b("br"),lt=I(),nt(ot.$$.fragment),at=I(),nt(ut.$$.fragment),dt=I(),ct=b("div");for(let t=0;t<yt.length;t+=1)yt[t].c();C(s,"class","svelte-1xpejh3"),C(o,"class","svelte-1xpejh3"),C(u,"id","vcoBtn"),C(u,"class","svelte-1xpejh3"),C(r,"id","vcaBtn"),C(r,"class","svelte-1xpejh3"),C(f,"id","vcfBtn"),C(f,"class","svelte-1xpejh3"),C(y,"id","mixerBtn"),C(y,"class","svelte-1xpejh3"),C(x,"id","adsrBtn"),C(x,"class","svelte-1xpejh3"),C(L,"id","lfoBtn"),C(L,"class","svelte-1xpejh3"),C(T,"id","delayBtn"),C(T,"class","svelte-1xpejh3"),C(q,"id","noiseBtn"),C(q,"class","svelte-1xpejh3"),C(z,"id","audioInpBtn"),C(z,"class","svelte-1xpejh3"),C(H,"class","svelte-1xpejh3"),C(j,"class","svelte-1xpejh3"),C(P,"class","svelte-1xpejh3"),C(V,"class","svelte-1xpejh3"),C(J,"class","svelte-1xpejh3"),C(Q,"class","svelte-1xpejh3"),C(B,"class","demos svelte-1xpejh3"),C(e,"class","menu svelte-1xpejh3"),C(ct,"class","modules svelte-1xpejh3")},m(i,g){h(i,e,g),m(e,n),m(n,s),m(n,l),m(n,o),m(n,a),m(n,u),m(n,d),m(n,r),m(n,p),m(n,f),m(n,v),m(n,y),m(n,w),m(n,x),m(n,E),m(n,L),m(n,_),m(n,T),m(n,N),m(n,q),m(n,S),m(n,z),m(n,A),m(n,H),m(n,O),m(n,B),m(B,j),m(B,F),m(B,M),m(B,P),m(B,D),m(B,U),m(B,V),m(B,R),m(B,G),m(B,J),m(B,W),m(B,Y),m(B,Q),m(B,et),m(e,lt),st(ot,e,null),m(e,at),st(ut,e,null),h(i,dt,g),h(i,ct,g);for(let t=0;t<yt.length;t+=1)yt[t]&&yt[t].m(ct,null);rt=!0,pt||(ft=[k(s,"click",t[5]),k(o,"click",t[6]),k(u,"click",t[8]),k(r,"click",t[9]),k(f,"click",t[10]),k(y,"click",t[11]),k(x,"click",t[12]),k(L,"click",t[13]),k(T,"click",t[14]),k(q,"click",t[15]),k(z,"click",t[16]),k(H,"click",t[7]),k(j,"click",t[17]),k(P,"click",t[18]),k(V,"click",t[19]),k(J,"click",t[20]),k(Q,"click",t[21]),c(t[2].call(null,n))],pt=!0)},p(t,e){if(1&e){let n;for(vt=t[0],n=0;n<vt.length;n+=1){const s=ln(t,vt,n);yt[n]?(yt[n].p(s,e),Z(yt[n],1)):(yt[n]=un(s),yt[n].c(),Z(yt[n],1),yt[n].m(ct,null))}for(X(),n=vt.length;n<yt.length;n+=1)mt(n);K()}},i(t){if(!rt){Z(ot.$$.fragment,t),Z(ut.$$.fragment,t);for(let t=0;t<vt.length;t+=1)Z(yt[t]);rt=!0}},o(t){tt(ot.$$.fragment,t),tt(ut.$$.fragment,t),yt=yt.filter(Boolean);for(let t=0;t<yt.length;t+=1)tt(yt[t]);rt=!1},d(t){t&&g(e),it(ot),it(ut),t&&g(dt),t&&g(ct),$(yt,t),pt=!1,i(ft)}}}function un(t){let n,s,i;const l=[t[26].props];var o=t[26].type;function a(t){let n={};for(let t=0;t<l.length;t+=1)n=e(n,l[t]);return{props:n}}return o&&(n=A(o,a())),{c(){n&&nt(n.$$.fragment),s=E()},m(t,e){n&&st(n,t,e),h(t,s,e),i=!0},p(t,e){const i=1&e?function(t,e){const n={},s={},i={$$scope:1};let l=t.length;for(;l--;){const o=t[l],a=e[l];if(a){for(const t in o)t in a||(s[t]=1);for(const t in a)i[t]||(n[t]=a[t],i[t]=1);t[l]=a}else for(const t in o)i[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}(l,[(u=t[26].props,"object"==typeof u&&null!==u?u:{})]):{};var u;if(1&e&&o!==(o=t[26].type)){if(n){X();const t=n;tt(t.$$.fragment,1,0,(()=>{it(t,1)})),K()}o?(n=A(o,a()),nt(n.$$.fragment),Z(n.$$.fragment,1),st(n,s.parentNode,s)):n=null}else o&&n.$set(i)},i(t){i||(n&&Z(n.$$.fragment,t),i=!0)},o(t){n&&tt(n.$$.fragment,t),i=!1},d(t){t&&g(s),n&&it(n,t)}}}function dn(t){let e,n,s,i,l,o;const a=[an,on],u=[];return i=window.mobileCheck()?1:0,l=u[i]=a[i](t),{c(){e=b("html"),n=b("body"),s=b("main"),l.c(),C(s,"class","svelte-1xpejh3"),C(n,"class","svelte-1xpejh3"),C(e,"lang","UTF-8")},m(t,l){h(t,e,l),m(e,n),m(n,s),u[i].m(s,null),o=!0},p(t,[e]){l.p(t,e)},i(t){o||(Z(l),o=!0)},o(t){tt(l),o=!1},d(t){t&&g(e),u[i].d()}}}function cn(t,e,n){let s,i,l,o;u(t,ft,(t=>n(1,s=t))),u(t,ct,(t=>n(23,i=t))),u(t,pt,(t=>n(24,l=t))),window.mobileCheck=function(){let t=!1;var e;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},window.AudioContext=window.AudioContext||window.webkitAudioContext;var a=new AudioContext;d(pt,l=a,l);var c=[];const r=(t,e={})=>{c.push({type:t,props:e}),n(0,c)},p=t=>{Object.values(i).forEach((t=>{St(t)})),t.modules.forEach((t=>{switch(t.type){case"vco":r(re,{state:t});break;case"mixer":r(Fe,{state:t});break;case"vca":r($e,{state:t});break;case"vcf":r(qe,{state:t});break;case"adsr":r(Ie,{state:t});break;case"lfo":r(Ue,{state:t});break;case"delay":r(Ye,{state:t});break;case"noise":r(Ze,{state:t});break;case"input":r(sn,{state:t})}})),d(ft,s.state=t.output,s)};return[c,s,function(t){o=t,o.childNodes.forEach((t=>{t.childNodes.length>1?t.childNodes.forEach((t=>{t.addEventListener("mouseenter",(()=>{t.style.opacity=.8})),t.addEventListener("mouseleave",(()=>{t.style.opacity=1}))})):(t.addEventListener("mouseenter",(()=>{t.style.opacity=.8})),t.addEventListener("mouseleave",(()=>{t.style.opacity=1})))}))},r,p,()=>{const t=[];Object.entries(i).forEach((e=>{t.push(e[1].state)}));const e={output:s.state,modules:t},n=JSON.stringify(e),l=document.createElement("a"),o=new Blob([n],{type:"text/plain"});l.href=URL.createObjectURL(o),l.download="patch.json",l.click()},()=>{Et().then((t=>{try{if(t&&1==t.length){const e=new FileReader;e.onload=t=>{if("string"==typeof t.target.result){const e=JSON.parse(t.target.result);p(e)}},e.readAsText(t[0])}}catch(t){console.log(t)}}))},()=>p({output:{volume:s.state.volume,inputId:null},modules:[]}),()=>r(re),()=>r($e),()=>r(qe),()=>r(Fe),()=>r(Ie),()=>r(Ue),()=>r(Ye),()=>r(Ze),()=>r(sn),()=>p({output:{volume:s.state.volume,inputId:1},modules:[{type:"vco",frequency:0,detune:0,shape:"triangle",id:0,title:"Oscillator",cvId:null,cvId2:null,position:{x:310,y:60}},{type:"vca",gain:1,id:1,inputId:0,cvId:2,title:"Amplifier",position:{x:660,y:61}},{type:"adsr",attack:.034,decay:.141,sustain:.169,release:.094,id:2,title:"Envelope",position:{x:975,y:62}}]}),()=>p({output:{volume:s.state.volume,inputId:8},modules:[{type:"vcf",voct:10.5078280948874,filterType:"lowpass",id:0,inputId:3,cvId:1,title:"Filter",position:{x:640,y:528}},{type:"adsr",attack:0,decay:.077,sustain:.058,release:.035,id:1,title:"Envelope",position:{x:318,y:513}},{type:"vco",frequency:0,detune:0,shape:"sawtooth",id:2,title:"Oscillator",cvId:null,cvId2:null,position:{x:302,y:66}},{type:"mixer",id:3,inputIds:[2,4,null,null],title:"Mixer",position:{x:979,y:77}},{type:"vco",frequency:0,detune:7,shape:"sawtooth",id:4,title:"Oscillator",cvId:null,cvId2:null,position:{x:637,y:68}},{type:"vco",frequency:-1.08333333333334,detune:-2,shape:"sine",id:5,title:"Oscillator",cvId:null,cvId2:null,position:{x:311,y:930}},{type:"mixer",id:6,inputIds:[0,7,null,null],title:"Mixer",position:{x:321,y:1384}},{type:"vca",gain:1,id:7,inputId:5,cvId:1,title:"Amplifier",position:{x:661,y:940}},{type:"vcf",voct:11.2724280948874,filterType:"lowpass",id:8,inputId:6,cvId:null,title:"Filter",position:{x:539,y:1383}}]}),()=>p({output:{volume:s.state.volume,inputId:3},modules:[{type:"vco",frequency:0,detune:0,shape:"sawtooth",id:0,title:"Oscillator",cvId:null,cvId2:null,position:{x:300,y:53}},{type:"vco",frequency:0,detune:10,shape:"sawtooth",id:1,title:"Oscillator",cvId:null,cvId2:null,position:{x:639,y:52}},{type:"mixer",id:2,inputIds:[0,1,6,7],title:"Mixer",position:{x:310,y:499}},{type:"vcf",voct:9.53782809488736,filterType:"lowpass",id:3,inputId:2,cvId:5,title:"Filter",position:{x:818,y:503}},{type:"adsr",attack:.443,decay:.465,sustain:.433,release:.387,id:5,title:"Envelope",position:{x:515,y:501}},{type:"vco",frequency:.333333333333324,detune:0,shape:"square",id:6,title:"Oscillator",cvId:null,cvId2:null,position:{x:975,y:52}},{type:"vco",frequency:.333333333333324,detune:8,shape:"square",id:7,title:"Oscillator",cvId:null,cvId2:null,position:{x:1311,y:53}}]}),()=>p({output:{volume:s.state.volume,inputId:3},modules:[{type:"vco",frequency:0,detune:44,shape:"sawtooth",id:0,title:"Oscillator",cvId:2,cvId2:1,position:{x:660,y:65}},{type:"lfo",frequency:1.7,shape:"sine",id:1,title:"LFO",position:{x:315,y:64}},{type:"adsr",attack:0,decay:.041,sustain:.5,release:.022,id:2,title:"Envelope",position:{x:319,y:339}},{type:"vcf",voct:10.5078280948874,filterType:"lowpass",id:3,inputId:0,cvId:null,title:"Filter",position:{x:999,y:64}}]}),()=>p({output:{volume:s.state.volume,inputId:9},modules:[{type:"vco",frequency:0,detune:0,shape:"sawtooth",id:0,title:"Oscillator",cvId:null,cvId2:null,position:{x:307,y:63}},{type:"adsr",attack:.012,decay:.123,sustain:.295,release:.156,id:2,title:"Envelope",position:{x:318,y:513}},{type:"vcf",voct:10.1541280948874,filterType:"lowpass",id:3,inputId:5,cvId:2,title:"Filter",position:{x:641,y:514}},{type:"mixer",id:5,inputIds:[0,6,null,null],title:"Mixer",position:{x:1007,y:78}},{type:"vco",frequency:-.583333333333339,detune:0,shape:"sawtooth",id:6,title:"Oscillator",cvId:null,cvId2:null,position:{x:656,y:70}},{type:"delay",id:8,title:"Delay",inputId:3,delayTime:.121,position:{x:319,y:945}},{type:"mixer",id:9,inputIds:[3,10,null,null],title:"Mixer",position:{x:959,y:876}},{type:"vca",gain:.215,id:10,inputId:8,cvId:null,title:"Amplifier",position:{x:642,y:922}}]})]}return new class extends at{constructor(t){super(),ot(this,t,cn,dn,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
