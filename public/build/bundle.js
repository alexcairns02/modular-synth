var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function c(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e){return e&&c(e.destroy)?e.destroy:t}function a(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode&&t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return f(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t){return""===t?null:+t}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}let m;function b(t){m=t}function _(){const t=function(){if(!m)throw new Error("Function called outside component initialization");return m}();return(e,n,{cancelable:o=!1}={})=>{const c=t.$$.callbacks[e];if(c){const r=function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const c=document.createEvent("CustomEvent");return c.initCustomEvent(t,n,o,e),c}(e,n,{cancelable:o});return c.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const y=[],x=[];let k=[];const w=[],E=Promise.resolve();let C=!1;function A(t){k.push(t)}function q(t){w.push(t)}const D=new Set;let O=0;function T(){if(0!==O)return;const t=m;do{try{for(;O<y.length;){const t=y[O];O++,b(t),G(t.$$)}}catch(t){throw y.length=0,O=0,t}for(b(null),y.length=0,O=0;x.length;)x.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];D.has(e)||(D.add(e),e())}k.length=0}while(y.length);for(;w.length;)w.pop()();C=!1,D.clear(),b(t)}function G(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const S=new Set;let M;function F(t,e){t&&t.i&&(S.delete(t),t.i(e))}function N(t,e,n,o){if(t&&t.o){if(S.has(t))return;S.add(t),M.c.push((()=>{S.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function P(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function R(t){t&&t.c()}function j(t,n,r,u){const{fragment:a,after_update:i}=t.$$;a&&a.m(n,r),u||A((()=>{const n=t.$$.on_mount.map(e).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(A)}function B(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];k.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),k=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(y.push(t),C||(C=!0,E.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function I(e,c,r,u,a,i,l,f=[-1]){const p=m;b(e);const d=e.$$={fragment:null,ctx:[],props:i,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:c.target||p.$$.root};l&&l(d.root);let $=!1;if(d.ctx=r?r(e,c.props||{},((t,n,...o)=>{const c=o.length?o[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=c)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](c),$&&V(e,t)),n})):[],d.update(),$=!0,o(d.before_update),d.fragment=!!u&&u(d.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);d.fragment&&d.fragment.l(t),t.forEach(s)}else d.fragment&&d.fragment.c();c.intro&&F(e.$$.fragment),j(e,c.target,c.anchor,c.customElement),T()}b(p)}class L{$destroy(){B(this,1),this.$destroy=t}$on(e,n){if(!c(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function U(e){let n,o,c,r,u,p,h,v,m,b=e[0]+e[2]+"";return{c(){n=l("main"),o=l("div"),c=l("h2"),c.textContent="MIDI",r=f("\r\n    Play notes by pressing keys on keyboard. Row Z-/ is white notes, row A-' is black notes. Press - to lower octave and = to raise octave.\r\n    "),u=l("h3"),p=f(e[1]),h=f(b),$(o,"class","svelte-49prnq")},m(t,s){var l;i(t,n,s),a(n,o),a(o,c),a(o,r),a(o,u),a(u,p),a(u,h),v||(m=d(window,"keydown",(l=e[3],function(t){return t.preventDefault(),l.call(this,t)})),v=!0)},p(t,[e]){2&e&&g(p,t[1]),5&e&&b!==(b=t[0]+t[2]+"")&&g(h,b)},i:t,o:t,d(t){t&&s(n),v=!1,m()}}}function z(t,e,n){const o=_();let c=!1,r=!1,u=4,a=4,i="A",s=0,l=0,f=440;return[a,i,l,function(t){if(!t.repeat){switch(r=!1,s=0,t.keyCode){case 61:u<10&&(u+=1,f*=2);break;case 173:u>-2&&(u-=1,f/=2);break;case 90:f=261.63,r=!0,n(1,i="C");break;case 83:f=277.18,r=!0,n(1,i="C#/Db");break;case 88:f=293.66,r=!0,n(1,i="D");break;case 68:f=311.13,r=!0,n(1,i="D#/Eb");break;case 67:f=329.63,r=!0,n(1,i="E");break;case 86:f=349.23,r=!0,n(1,i="F");break;case 71:f=369.99,r=!0,n(1,i="F#/Gb");break;case 66:f=392,r=!0,n(1,i="G");break;case 72:f=415.3,r=!0,n(1,i="G#/Ab");break;case 78:f=440,r=!0,n(1,i="A");break;case 74:f=466.16,r=!0,n(1,i="A#/Bb");break;case 77:f=493.88,r=!0,n(1,i="B");break;case 188:f=523.25,r=!0,n(1,i="C"),s=1;break;case 76:f=554.37,r=!0,n(1,i="C#/Db"),s=1;break;case 190:f=587.33,r=!0,n(1,i="D"),s=1;break;case 59:f=622.25,r=!0,n(1,i="D#/Eb"),s=1;break;case 191:f=659.25,r=!0,n(1,i="E"),s=1}if(r){if(u>4)for(let t=4;t<u;t++)f*=2;else for(let t=4;t>u;t--)f/=2;c=!c,n(0,a=u),n(2,l=s)}o("signal",{output:Math.log2(f),trigger:c})}}]}class Z extends L{constructor(t){super(),I(this,t,z,U,r,{})}}function H(e){let n,c,r,h,g,m,b,_,y,x,k,w,E,C,A,q,D,O,T,G,S,M,F,N,P,R,j;return P=function(t){let e;return{p(...n){e=n,e.forEach((e=>t.push(e)))},r(){e.forEach((e=>t.splice(t.indexOf(e),1)))}}}(e[6][0]),{c(){n=l("main"),c=l("div"),r=l("h2"),r.textContent="Oscillator",h=p(),g=l("label"),m=l("input"),b=f("Frequency"),_=p(),y=l("section"),x=l("label"),k=l("input"),w=f(" Sine"),E=p(),C=l("label"),A=l("input"),q=f(" Triangle"),D=p(),O=l("label"),T=l("input"),G=f(" Sawtooth"),S=p(),M=l("label"),F=l("input"),N=f(" Square"),$(m,"type","range"),$(m,"min","2.78135971352466"),$(m,"max","14.78135971352466"),$(m,"step","0.0001"),$(k,"type","radio"),k.__value="sine",k.value=k.__value,$(A,"type","radio"),A.__value="triangle",A.value=A.__value,$(T,"type","radio"),T.__value="sawtooth",T.value=T.__value,$(F,"type","radio"),F.__value="square",F.value=F.__value,$(c,"class","svelte-49prnq"),P.p(k,A,T,F)},m(t,o){i(t,n,o),a(n,c),a(c,r),a(c,h),a(c,g),a(g,m),v(m,e[0]),a(g,b),a(c,_),a(c,y),a(y,x),a(x,k),k.checked=k.__value===e[1].type,a(x,w),a(y,E),a(y,C),a(C,A),A.checked=A.__value===e[1].type,a(C,q),a(y,D),a(y,O),a(O,T),T.checked=T.__value===e[1].type,a(O,G),a(y,S),a(y,M),a(M,F),F.checked=F.__value===e[1].type,a(M,N),R||(j=[u(e[2].call(null,window)),d(m,"change",e[4]),d(m,"input",e[4]),d(k,"change",e[5]),d(A,"change",e[7]),d(T,"change",e[8]),d(F,"change",e[9])],R=!0)},p(t,[e]){1&e&&v(m,t[0]),2&e&&(k.checked=k.__value===t[1].type),2&e&&(A.checked=A.__value===t[1].type),2&e&&(T.checked=T.__value===t[1].type),2&e&&(F.checked=F.__value===t[1].type)},i:t,o:t,d(t){t&&s(n),P.r(),R=!1,o(j)}}}function J(t,e,n){let{ctx:o}=e,{voct:c}=e;const r=_();let u=o.createOscillator();u.start(0);return t.$$set=t=>{"ctx"in t&&n(3,o=t.ctx),"voct"in t&&n(0,c=t.voct)},t.$$.update=()=>{1&t.$$.dirty&&c&&n(1,u.frequency.value=Math.pow(2,c),u)},[c,u,()=>r("signal",{output:u}),o,function(){c=h(this.value),n(0,c)},function(){u.type=this.__value,n(1,u),n(0,c)},[[]],function(){u.type=this.__value,n(1,u),n(0,c)},function(){u.type=this.__value,n(1,u),n(0,c)},function(){u.type=this.__value,n(1,u),n(0,c)}]}class K extends L{constructor(t){super(),I(this,t,J,H,r,{ctx:3,voct:0})}}function Q(e){let n,c,r,u,h,m,b,_,y,x,k,w;return{c(){n=l("main"),c=l("div"),r=l("h2"),r.textContent="Output",u=p(),h=l("label"),m=l("input"),b=f("Gain"),_=p(),y=l("button"),x=f(e[1]),$(m,"type","range"),$(m,"min","0"),$(m,"max","2"),$(m,"step","0.001"),$(c,"class","svelte-49prnq")},m(t,o){i(t,n,o),a(n,c),a(c,r),a(c,u),a(c,h),a(h,m),v(m,e[0].gain.value),a(h,b),a(c,_),a(c,y),a(y,x),k||(w=[d(m,"change",e[5]),d(m,"input",e[5]),d(y,"click",e[2])],k=!0)},p(t,[e]){1&e&&v(m,t[0].gain.value),2&e&&g(x,t[1])},i:t,o:t,d(t){t&&s(n),k=!1,o(w)}}}function W(t,e,n){let{ctx:o}=e,{input:c}=e;var r=o.createGain(),u=!1,a="Unmute";return t.$$set=t=>{"ctx"in t&&n(3,o=t.ctx),"input"in t&&n(4,c=t.input)},t.$$.update=()=>{25&t.$$.dirty&&c&&(c.connect(r),r.connect(o.destination))},[r,a,function(){u?(u=!1,n(1,a="Unmute"),o.suspend()):(u=!0,n(1,a="Mute"),o.resume())},o,c,function(){r.gain.value=h(this.value),n(0,r)}]}class X extends L{constructor(t){super(),I(this,t,W,Q,r,{ctx:3,input:4})}}function Y(e){let n,c,r,h,g,m,b,_,y,x,k,w,E;return{c(){n=l("main"),c=l("div"),r=l("h2"),r.textContent="Envelope",h=p(),g=l("label"),m=l("input"),b=f("Attack"),_=p(),y=l("label"),x=l("input"),k=f("Release"),$(m,"type","range"),$(m,"min","0"),$(m,"max","1"),$(m,"step","0.001"),$(x,"type","range"),$(x,"min","0"),$(x,"max","1"),$(x,"step","0.001"),$(c,"class","svelte-49prnq")},m(t,o){i(t,n,o),a(n,c),a(c,r),a(c,h),a(c,g),a(g,m),v(m,e[0]),a(g,b),a(c,_),a(c,y),a(y,x),v(x,e[1]),a(y,k),w||(E=[u(e[2].call(null,window)),d(m,"change",e[6]),d(m,"input",e[6]),d(x,"change",e[7]),d(x,"input",e[7])],w=!0)},p(t,[e]){1&e&&v(m,t[0]),2&e&&v(x,t[1])},i:t,o:t,d(t){t&&s(n),w=!1,o(E)}}}function tt(t,e,n){let{ctx:o}=e,{trigger:c}=e,{input:r}=e,u=1,a=1,i=_();var s=o.createGain();return t.$$set=t=>{"ctx"in t&&n(3,o=t.ctx),"trigger"in t&&n(4,c=t.trigger),"input"in t&&n(5,r=t.input)},t.$$.update=()=>{32&t.$$.dirty&&r&&r.connect(s),16&t.$$.dirty&&(!c&&c||(()=>{let t=o.currentTime;s.gain.cancelScheduledValues(t),s.gain.linearRampToValueAtTime(1,t+u),s.gain.linearRampToValueAtTime(0,t+u+a)})())},[u,a,()=>i("signal",{output:s}),o,c,r,function(){u=h(this.value),n(0,u)},function(){a=h(this.value),n(1,a)}]}class et extends L{constructor(t){super(),I(this,t,tt,Y,r,{ctx:3,trigger:4,input:5})}}function nt(t){let e,n,o,c,r,u,f,d,h,g,v,m,b,_,y,k;function w(e){t[8](e)}function E(e){t[9](e)}n=new Z({}),n.$on("signal",t[6]);let C={};function A(e){t[10](e)}function D(e){t[11](e)}function O(e){t[12](e)}void 0!==t[0]&&(C.ctx=t[0]),void 0!==t[2]&&(C.voct=t[2]),c=new K({props:C}),x.push((()=>P(c,"ctx",w))),x.push((()=>P(c,"voct",E))),c.$on("signal",t[5]);let T={};function G(e){t[13](e)}function S(e){t[14](e)}void 0!==t[0]&&(T.ctx=t[0]),void 0!==t[4]&&(T.trigger=t[4]),void 0!==t[1]&&(T.input=t[1]),d=new et({props:T}),x.push((()=>P(d,"ctx",A))),x.push((()=>P(d,"trigger",D))),x.push((()=>P(d,"input",O))),d.$on("signal",t[7]);let M={};return void 0!==t[0]&&(M.ctx=t[0]),void 0!==t[3]&&(M.input=t[3]),b=new X({props:M}),x.push((()=>P(b,"ctx",G))),x.push((()=>P(b,"input",S))),{c(){e=l("main"),R(n.$$.fragment),o=p(),R(c.$$.fragment),f=p(),R(d.$$.fragment),m=p(),R(b.$$.fragment),$(e,"class","svelte-1h6otfa")},m(t,r){i(t,e,r),j(n,e,null),a(e,o),j(c,e,null),a(e,f),j(d,e,null),a(e,m),j(b,e,null),k=!0},p(t,[e]){const n={};!r&&1&e&&(r=!0,n.ctx=t[0],q((()=>r=!1))),!u&&4&e&&(u=!0,n.voct=t[2],q((()=>u=!1))),c.$set(n);const o={};!h&&1&e&&(h=!0,o.ctx=t[0],q((()=>h=!1))),!g&&16&e&&(g=!0,o.trigger=t[4],q((()=>g=!1))),!v&&2&e&&(v=!0,o.input=t[1],q((()=>v=!1))),d.$set(o);const a={};!_&&1&e&&(_=!0,a.ctx=t[0],q((()=>_=!1))),!y&&8&e&&(y=!0,a.input=t[3],q((()=>y=!1))),b.$set(a)},i(t){k||(F(n.$$.fragment,t),F(c.$$.fragment,t),F(d.$$.fragment,t),F(b.$$.fragment,t),k=!0)},o(t){N(n.$$.fragment,t),N(c.$$.fragment,t),N(d.$$.fragment,t),N(b.$$.fragment,t),k=!1},d(t){t&&s(e),B(n),B(c),B(d),B(b)}}}function ot(t,e,n){window.AudioContext=window.AudioContext||window.webkitAudioContext;var o=new AudioContext;let c,r,u,a;return[o,c,r,u,a,t=>{n(1,c=t.detail.output)},t=>{n(2,r=t.detail.output),n(4,a=t.detail.trigger)},t=>{n(3,u=t.detail.output)},function(t){n(0,o=t)},function(t){r=t,n(2,r)},function(t){n(0,o=t)},function(t){a=t,n(4,a)},function(t){c=t,n(1,c)},function(t){n(0,o=t)},function(t){u=t,n(3,u)}]}return new class extends L{constructor(t){super(),I(this,t,ot,nt,r,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
